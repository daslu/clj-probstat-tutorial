<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tutorial on Probability and Statistics using Clojure</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-2486e1f0a3ee9ee1fc393803a1361cdb.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-bba601d2e4152bc38262056ee7a0d92f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#probability" id="toc-probability" class="nav-link active" data-scroll-target="#probability">Probability</a>
  <ul>
  <li><a href="#probability-space" id="toc-probability-space" class="nav-link" data-scroll-target="#probability-space">Probability Space</a></li>
  <li><a href="#tickets-in-a-box-model" id="toc-tickets-in-a-box-model" class="nav-link" data-scroll-target="#tickets-in-a-box-model">Tickets in a Box Model</a></li>
  <li><a href="#independence" id="toc-independence" class="nav-link" data-scroll-target="#independence">Independence</a></li>
  <li><a href="#reproducible-model" id="toc-reproducible-model" class="nav-link" data-scroll-target="#reproducible-model">Reproducible Model</a></li>
  <li><a href="#law-of-large-numbers" id="toc-law-of-large-numbers" class="nav-link" data-scroll-target="#law-of-large-numbers">Law of Large Numbers</a></li>
  <li><a href="#central-limit-theorem" id="toc-central-limit-theorem" class="nav-link" data-scroll-target="#central-limit-theorem">Central Limit Theorem</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tutorial on Probability and Statistics using Clojure</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
.clay-side-by-side .sourceCode {margin: 0}
.clay-side-by-side {margin: 1em 0}
</style>
<script src="index_files/md-default5.js" type="text/javascript"></script>
<script src="index_files/md-default6.js" type="text/javascript"></script>
<script src="index_files/katex7.js" type="text/javascript"></script>
<script src="index_files/vega8.js" type="text/javascript"></script>
<script src="index_files/vega9.js" type="text/javascript"></script>
<script src="index_files/vega10.js" type="text/javascript"></script>
<script src="index_files/plotly11.js" type="text/javascript"></script>
<p><link href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" rel="stylesheet" type="text/css"> This tutorial assumes some familiarity with Clojure and with high-school maths (algebra, probability, statistics, <em>etc</em>.).</p>
<p>We use Clojure and <a href="https://github.com/generateme/fastmath">fastmath</a> version 3 in this tutorial.</p>
<p><strong>Note</strong>: this is still a work in progress. I’d love to receive your feedbacks or suggestions.</p>
<section id="probability" class="level1">
<h1>Probability</h1>
<p>In our daily lives, we often encounter situations where we don’t know what will happen. Some of these situations can have a significant impact on our lives, while others simply spark our curiosity or provide us with a sense of excitement and anticipation. For example, during the rainy season, we might wonder if tomorrow’s weather will leave us soaked, prompting us to prepare an umbrella beforehand. Similarly, hoping for our favorite sports team to win a game can fill us with eager anticipation. In our jobs as programmers, we may need to estimate the maximum requests per second our service can handle during peak hours so that we can allocate resources accordingly.</p>
<p>In probability and statistics, we refer to the act of witnessing or measuring these uncertain situations as an <em>experiment</em> or an <em>observation</em>. An experiment is considered random when we cannot predict the outcome with certainty. In contrast, a deterministic experiment is one where the result can be predicted with near certainty, such as evaluating the expression (+ 3 4) in Clojure, which will always return 7.</p>
<p>Probability of these uncertain situations are scaled between 0% and 100%. The higher the probability, the more likely a situation to occur. A weather report telling us there’s a 80% probability of raining tomorrow make us more ready to bring an umbrella tomorrow compared to report telling us 30% probability of raining. Similarly, a 80% chance for our local sports team to win might bring us a sense of calm when watching them play compared to cautious feeling if the probability of winning is just 30%.</p>
<section id="probability-space" class="level2">
<h2 class="anchored" data-anchor-id="probability-space">Probability Space</h2>
<p>Let’s consider a classic experiment occurs in most of probability books, a coin flip experiment: we flip a coin and see whether head or tail occurs. We’re doing 1 experiment or 1 trial and the possible results are head or tail. In probability theory, head or tail are possible <em>outcomes</em> of an experiment. We could use clojure keyword to symbolize the outcomes: <code>:head</code> or <code>:tail</code>.</p>
<p>Let’s consider another experiment where we flip a coin twice in an experiment. The possible sequences of <em>outcomes</em> are ordered-pairs <code>[:head :tail]</code>, <code>[:tail :head]</code>, <code>[:tail :tail]</code>, and <code>[:head :head]</code>.</p>
<p>From a particular experiment, each <code>outcome</code> is unique. An experiment yields an <code>outcome</code> for each trial. The set of all possible outcomes of an experiment is the <em>sample space</em> which usually denoted with S or Ω (Greek capital for Omega). So for the coin flip, the S is <code>#{:head :tail}</code> and the flip-a-coin-twice experiment, the S or Ω is <code>#{[:head :tail] [:tail :head] [:tail :tail] [:head :head]}</code>.</p>
<p>Now, we want to know whether tomorrow’s maximum temperature will be 34 degrees celcius. The outcomes of the experiment depends on the range and precision of our temperature sensor device. For example, our device has temperature range from -10 to 50 degrees celcius with 0.001 precision. The sample space is <code>#{-10.000, -10.001, -10.002, ..... , 49.998, 49.999, 50.000}</code>. Compared to our coin flip experiments above, this maximum temperature experiment’s sample space has more number of outcomes. In practical daily life usage, it is enough for us to know the maximum temperature in integer (ex. it’s 34 degrees celcius). So, looking at the possible outcomes, we decide that we’re interested to know whether tomorrow’s maximum temperature is between 33.5 and 34.5 degrees celcius which is a set <code>#{33.500, 33.501, ..., 34.449, 34.500}</code>. We’re interested in a subset of the outcomes.</p>
<p>In probability theory, a subset of outcomes from an experiment is called an <code>event</code>. The distinction between <code>outcome</code> and <code>event</code> is practically useful, especially in experiments with continuous or very large sample spaces.</p>
<p>Consider our maximum temperature experiment. The sample space contains all possible temperature readings (e.g., 33.501°C, 33.502°C, 33.503°C, etc.). However, in practical applications, we’re often interested in broader categories rather than exact measurements. For instance, we might want to know the probability of the temperature being “around 34 degrees Celsius”. We could define this as an event: “the maximum temperature is greater than or equal to 33.5°C and less than 34.5°C”. This event would include all outcomes in the set <code>#{33.500, 33.501, ..., 34.499}</code>.</p>
<p>In flip-a-coin-twice experiment, we might be interested in events where only 1 :head occurs like <code>#{[:head :tail]}</code> and <code>#{[:tail :head]}</code>. The event where 2 occurs is <code>#{[:head :head]}</code>. In our single coin-toss experiment, the possible events are <code>#{:head}</code> or <code>#{:tail}</code>. Events such as <code>#{[:head :head]}</code> and <code>#{:head}</code> or <code>#{:tail}</code> are events with exactly one outcome. In probability theory, an event containing exactly one outcome is called an <code>elementary event</code>.</p>
<p>In a coin flip experiment with a fair coin where we expect both head and tail equally likely to happen, we assign both outcomes with equal probability 50%.</p>
</section>
<section id="tickets-in-a-box-model" class="level2">
<h2 class="anchored" data-anchor-id="tickets-in-a-box-model">Tickets in a Box Model</h2>
<p>We can simulate <em>random</em> experiments in our computers. We can, programmatically, create a model of <em>random</em> experiment and run the model simulations in our computer. The model should be small enough to capture relevant aspects of a <em>random</em> experiment we have learned: the outcomes, sample space, events, and probabilities.</p>
<p>We will use a tickets-in-a-box model or “box model”, for short. The box contains tickets and each ticket has an outcome written on it. The outcome written could be “head” or “tail” from tossing a coin, “win” or “lose” or “draw” from a sports match between 2 teams, or all possible temperature readings from maximum temperatur experiment – it depends on the random experiment. Every potential outcome is represented on at least one ticket in the box. Certain outcomes might be found on multiple tickets. We can imagine that we shake the box to ensure that the tickets inside are randomly shuffled thus each individual ticket are equally likely to be selected. Doing an experiment means we pick a ticket from the box and then see what is written on the ticket to know the outcome.</p>
<p>In this box model, the probability of an outcome is the amount of tickets with that outcome written on them, divided by total amount of all tickets. The proportions of each outcomes written relative to the total number of tickets defines the probability property of a box. An outcome with more written tickets has more probability than other outcomes with lesser tickets. Intuitively, we are more likely to pick a ticket with higher outcome proportion. For example, a box with 7 head tickets and 3 tail tickets has same probability property like a box with 7 millions head tickets and 3 millions tail tickets and we are more likely to pick a head ticket from the box.</p>
<p>Let’s create a box for our flip-a-coin experiment. The outcomes are <code>:head</code> or <code>:tail</code>. We assume we’re using fair coin, so the proportions of head and tail are the same. We use 5 tickets for each outcome.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>[<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>[<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Doing the experiment means we properly shake the box then pick a ticket. In our implementation, we use <code>clojure.core/rand-nth</code> function to simulate the acts of shuffling the box and pick a random ticket. We also don’t remove the ticket from the box collection to simulate the act of putting the picked ticket back to the box. We create a function <code>fair-coin-box</code> where calling that function means we shake the box, pick a random ticket, then put the ticket in the box. The return value of the function is the outcome written on a ticket.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> fair-coin-box</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Simulates shaking a box then pick a random ticket from the box then put the ticket back in the box.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="st">   The return value is what's written on the picked ticket.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="st">   Since we're using an immutable vector, this implicitly models:</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="st">   1. Random selection from all tickets</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="st">   2. Box always remains in original state for next pick"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  []</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> [tickets [<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span>]]</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">rand-nth</span> tickets)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s do 1 trial</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(fair-coin-box)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="at">:head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s do 5 trials</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">5</span> #(fair-coin-box))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:head</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we do a large number of trials, the proportions of picked tickets should be close to 50% head and 50% tail. The results approximately reflects the probability property of that box.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">frequencies</span> (<span class="kw">repeatedly</span> <span class="dv">1000</span> #(fair-coin-box)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:tail</span> <span class="dv">485</span>, <span class="at">:head</span> <span class="dv">515</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="independence" class="level2">
<h2 class="anchored" data-anchor-id="independence">Independence</h2>
<p>It’s important to understand that when we use <code>repeatedly</code> with our <code>fair-coin-box</code>, each call is an <code>independent</code> trial. The <em>independence</em> comes from each <code>rand-nth</code> returns a random element from the vector of tickets, independent of previous picks. <em>Independent</em> means the probability of getting a head (or tail) on any given trial is always 0.5, regardless of what happened in any other trials.</p>
<p>This idea about <em>independence</em> is important because, for example, in our flip-a-coin experiment with fair coin, there are some misconceptions such as:</p>
<ol type="1">
<li>“After seeing three heads in a row, tails is more likely to come up next to balance things out”</li>
<li>“If I’ve seen more heads than tails so far, the next few flips should more likely to return tails to even things up”</li>
</ol>
<p>Let’s focus on the simplest case that after 2 trial, the probability of seeing :head in the second trial is still 0.5, even after the first trial results in :head. We’ll do the 2 trial 1000 times.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> two-fair-coin-trials </span>[]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  [(fair-coin-box) (fair-coin-box)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [two-trials (<span class="kw">repeatedly</span> <span class="dv">1000</span> #(two-fair-coin-trials))]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; Even if we know the first pick was head,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; the second pick still has 50/50 chance</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;&gt;</span> two-trials</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">filter</span> #(<span class="kw">=</span> <span class="at">:head</span> (<span class="kw">first</span> <span class="va">%</span>)))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">map</span> <span class="kw">second</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>       <span class="kw">frequencies</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:head</span> <span class="dv">245</span>, <span class="at">:tail</span> <span class="dv">244</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This notion of independence is crucial in probability theory. The outcome of one trial doesn’t influence the others. In above example, even after picking head, the count of :head and :tail are almost the same. There’s no bias to :tail after a :head result.</p>
</section>
<section id="reproducible-model" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-model">Reproducible Model</h2>
<p>Imagine that you have a fair-coin and after doing an experiment by flipping the coin 10 times, you believe you have found a fascinating pattern. You tell your colleague, “Hey, I flipped this coin 10 times and got this fascinating pattern!”. But, when your colleague replicate your experiment, they get completely different result. How can they verify your experiment?</p>
<p>In game development, we might develop a gameplay with random elements and we encounter a bug. Without reproducibility randomness, it would be nearly impossible for other developers to recreate and fix the problems.</p>
<p>Let’s go back to our <code>fair-coin-box</code> function implementation above.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> fair-coin-box</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  []</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> [tickets [<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span>]]</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">rand-nth</span> tickets)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can imagine giving this box to our colleague but they’ll get different result when calling this function 10 times.</p>
<p>Our trials</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">10</span> #(fair-coin-box))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:head</span> <span class="at">:head</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our colleague trials</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">10</span> #(fair-coin-box))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:tail</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, what if we can, somehow, make a box that still give us a random ticket when picked, but returns reproducible result? Back to our initial implementation for our fair-coin-box and we see that the key is the <code>rand-nth</code> function. For our purpose, <code>rand-nth</code> picks an element from a random index of our vector of tickets. We could make a function which reproducibly generate a random index from our vector or we generalize and create a function that reproducibly generates a random number then we convert the produced random number to an index of our vector.</p>
<p>A function which generates a random number is called a Random Number Generator (RNG) in computer science. For our need of reproducible experiment, we’re going to use Pseudo RNG or PRNG for short. PRNG when called multiple times will return a sequence of numbers that <em>appears</em> to be random. This PRNG is stateful and deterministic which means given same initial state, it will continually produce same sequence of <em>pseudo</em> random numbers.</p>
<p>Let’s implement a simple PRNG called Linear Congruential Generator (LCG). The formula is:</p>
<p><span class="math display">\[X_{n+1} = (a * X_n + c) \mod m \text{ where } n \geq 0\]</span></p>
<p><span class="math display">\[m \text{ the modulus, }  0 &lt; m\]</span></p>
<p><span class="math display">\[a \text{ the multiplier, }  0 \leq a &lt; m\]</span></p>
<p><span class="math display">\[c \text{ the increment, }  0 \leq c &lt; m\]</span></p>
<p><span class="math display">\[X_0 \text{ the starting value, }  0 \leq X_0 &lt; m\]</span></p>
<p>Here’s one implementation. <code>make-lcg</code> accepts the parameters and return a function to generate a random number. The implentation uses a closure that wraps an atom so that the function “remembers” the Xn to be returned.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> make-lcg</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Returns a lcg function."</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  [{<span class="at">:keys</span> [X0 a c m]}]</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> [state (<span class="kw">atom</span> X0)]</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">fn</span> []</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>      (<span class="kw">let</span> [Xn <span class="at">@state</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>            Xn+<span class="dv">1</span> (<span class="kw">mod</span> (<span class="kw">+</span> (<span class="kw">*</span> a Xn) c) m)]</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">reset!</span> state Xn+<span class="dv">1</span>)         <span class="co">; Update the state</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>        Xn))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> lcg-0 </span>(make-lcg {<span class="at">:X0</span> <span class="dv">7</span> <span class="at">:a</span> <span class="dv">7</span> <span class="at">:c</span> <span class="dv">7</span> <span class="at">:m</span> <span class="dv">10</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>let’s generate a sequence of 20 numbers</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">20</span> lcg<span class="dv">-0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">7</span> <span class="dv">6</span> <span class="dv">9</span> <span class="dv">0</span> <span class="dv">7</span> <span class="dv">6</span> <span class="dv">9</span> <span class="dv">0</span> <span class="dv">7</span> <span class="dv">6</span> <span class="dv">9</span> <span class="dv">0</span> <span class="dv">7</span> <span class="dv">6</span> <span class="dv">9</span> <span class="dv">0</span> <span class="dv">7</span> <span class="dv">6</span> <span class="dv">9</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>=&gt; (7 6 9 0 7 6 9 0 7 6)</p>
<p>As we can see the result is a periodic sequence of 7, 6, 9, 0, then it repeats again. Mathematically inclined readers will quickly realize that there is a period of numbers because of the use of modulus in LCG formula and we choose 10 as our m. The choice of X0, a, m, and c determines the period of the generated sequence of numbers before it cycles again. It is the property of LCG that it produces a periodic sequence of <em>pseudo</em> random numbers. We’re going to choose sufficiently large m and combination of a and c to make our period large enough so we can generate many many random numbers before the numbers form a new period.</p>
<p>We’re going to use m = 2^48, c = 11, a = 25214903917, which are parameters used in java.util.Random according to wikipedia (https://en.wikipedia.org/wiki/Linear_congruential_generator)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> lcg-1 </span>(make-lcg {<span class="at">:X0</span> <span class="dv">2007</span> <span class="at">:c</span> <span class="dv">25214903917</span> <span class="at">:a</span> <span class="dv">11</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:m</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>)}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">20</span> lcg<span class="dv">-1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2007</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.5214925994E10</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.02579089851E11</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.353584892278E12</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.6914648718975E13</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.24611374101986E14</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.44850423183139E14</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.60105079522542E14</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a> <span class="fl">7.2331229387943E13</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.32718784749978E14</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.6657056757771E13</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.1777862528742E13</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.29581702720079E14</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.8049061271506E13</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.98564888890483E14</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.13914155724638E14</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.01281114189687E14</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.69692540858506E14</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a> <span class="fl">1.51893397240923E14</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.6347770100079E14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The number is too large, we could create another functionlcg-rand whose input is the lcg function and the modulus and returns random number between 0 and 1. We just divides the number returned from lcg with the m.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> lcg-rand</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"returns random number between 0 and 1"</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  [lcg m]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">/</span> (<span class="kw">double</span> (lcg)) m))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">20</span> #(lcg-rand lcg<span class="dv">-0</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">2.4868995751603507E-14</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.1316282072803006E-14</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.197442310920451E-14</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.0</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.4868995751603507E-14</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.1316282072803006E-14</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.197442310920451E-14</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.0</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.4868995751603507E-14</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.1316282072803006E-14</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.197442310920451E-14</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.0</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.4868995751603507E-14</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.1316282072803006E-14</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.197442310920451E-14</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.0</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.4868995751603507E-14</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.1316282072803006E-14</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.197442310920451E-14</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">20</span> #(lcg-rand lcg<span class="dv">-1</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">0.2967587377826213</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.2644356969428898</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.9088822477058436</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.997794306098335</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.9758269484157402</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.7341860139071983</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.07613573431323672</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.8375826587796595</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.2134988279103105</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.348576688347471</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.8344331531562368</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.1788542660526602</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.9674865079133177</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.6424411683805502</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.06694243352010787</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.7364563500552421</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.10110943194171895</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.11229333269296404</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.23531624095666004</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.588568231857316</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A visualization might help us see the randomness of lcg-0 and lcg-1. Using lcg-rand to generate random numbers, we’re going to plot each number against the next number in the sequence (X,Y) = (Xn, Xn+1)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> plot-lcg</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  [lcg m]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> [pairs (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> <span class="dv">1000</span> #(lcg-rand lcg m))</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                   (<span class="kw">partition</span> <span class="dv">2</span>))  </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        ds (tc/dataset pairs {<span class="at">:column-names</span> [<span class="at">:x</span> <span class="at">:y</span>]})]</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    (hanami/plot ds</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                 hanami/point-chart</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                 {:=x <span class="at">:x</span> :=y <span class="at">:y</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>lcg-0</code> with a = 7, c = 7, m = 10, and X0 = 7.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [pairs (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> <span class="dv">1000</span> lcg<span class="dv">-0</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>                 (<span class="kw">partition</span> <span class="dv">2</span>))  </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>      ds (tc/dataset pairs {<span class="at">:column-names</span> [<span class="at">:x</span> <span class="at">:y</span>]})]</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  (hanami/plot ds</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>               hanami/point-chart</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>               {:=x <span class="at">:x</span> :=y <span class="at">:y</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>                :=mark-size <span class="dv">200</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"circle","size":200,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"index_files\/0.csv","format":{"type":"csv"}}});</script></div>
<p>Above is an LCG with a poor parameter because</p>
<ol type="1">
<li>The period is short just 4 numbers, just 7,6,9, and 0.</li>
<li>Only 2 pairs generated</li>
</ol>
<p><code>lcg-1</code> m = 2^48, c = 11, a = 25214903917, and X0 = 2007. Here we use lcg-rand function so that the x and y axis is small.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [m (Math/pow <span class="dv">2</span> <span class="dv">48</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>      pairs (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> <span class="dv">1000</span> #(lcg-rand lcg<span class="dv">-1</span> m))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                 (<span class="kw">partition</span> <span class="dv">2</span>))  </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>      ds (tc/dataset pairs {<span class="at">:column-names</span> [<span class="at">:x</span> <span class="at">:y</span>]})]</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  (hanami/plot ds</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>               hanami/point-chart</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>               {:=x <span class="at">:x</span> :=y <span class="at">:y</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"circle","tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"index_files\/1.csv","format":{"type":"csv"}}});</script></div>
<p>Now, here we see what is called “lattice structure”. There’s a noticable pattern between a number and the next number in the sequence but for our present purpose, the LCG with above parameters is good enough because:</p>
<ol type="1">
<li>The period length is large enough to get large amount of random numbers.</li>
<li>It shows a reproducible randomness.</li>
<li>The random numbers are evenly distributed between 0 and 1 If plot histogram the lcg-1 values in x axis between 0 and 1, it should show roughly equal height bars which means that our lcg-1 generates equally distributed random numbers.</li>
</ol>
<div class="sourceClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [numbers (<span class="kw">sort</span> (<span class="kw">repeatedly</span> <span class="dv">1000</span> #(lcg-rand lcg<span class="dv">-1</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>))))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>      ds (tc/dataset {<span class="at">:x</span> numbers})]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  (plotly/layer-histogram ds</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                          {:=x <span class="at">:x</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
              [{"mode":null,"type":"bar","name":"","r":null,"theta":null,"text":null,"x":[0.050337621111135,0.15026354361045569,0.2501894661097763,0.35011538860909697,0.45004131110841766,0.5499672336077384,0.6498931561070589,0.7498190786063796,0.8497450011057004,0.9496709236050209],"y":[92,95,112,99,107,89,86,112,93,115]}], {"width":500,"height":400,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x"},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"count"},"title":null}, {});</script></div>
<p>Now, we have a LCG as our PRNG. We create 2 LCGs each returning same repeatable sequence of random numbers given same initial value X0.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> lcg-A </span>(make-lcg {<span class="at">:X0</span> <span class="dv">2024</span> <span class="at">:c</span> <span class="dv">25214903917</span> <span class="at">:a</span> <span class="dv">11</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:m</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>)}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> lcg-B </span>(make-lcg {<span class="at">:X0</span> <span class="dv">2024</span> <span class="at">:c</span> <span class="dv">25214903917</span> <span class="at">:a</span> <span class="dv">11</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:m</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>)}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">5</span> lcg-A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2024</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.5214926181E10</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.02579091908E11</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.353584914905E12</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.6914648967872E13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">5</span> lcg-B)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2024</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a> <span class="fl">2.5214926181E10</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.02579091908E11</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.353584914905E12</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.6914648967872E13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since we can create repeatable random numbers with our LCG, we create a version 2 of our fair-coin-box where the randomness comes from our LCG. This fair-coin-box now optionally accepts a seed which is the X0 from our LCG.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> make-fair-coin-box</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  ([]</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>   <span class="co">;; we generate a seed which is rand-int between 1 - 65432</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>   (fair-coin-box (<span class="kw">rand-int</span> <span class="dv">1</span> <span class="dv">65432</span>)))</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  ([seed]</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">let</span> [m (Math/pow <span class="dv">2</span> <span class="dv">48</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>         lcg (make-lcg {<span class="at">:X0</span> seed <span class="at">:c</span> <span class="dv">25214903917</span> <span class="at">:a</span> <span class="dv">11</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">:m</span> m})]</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">fn</span> []</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">let</span> [tickets [<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:tail</span>]</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>             len (<span class="kw">count</span> tickets)]</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>         (<span class="kw">nth</span> tickets</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>              (<span class="kw">long</span> (<span class="kw">*</span> (lcg-rand lcg m) len))))))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We create 2 boxes</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> box-1 </span>(make-fair-coin-box <span class="dv">2007</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> box-2 </span>(make-fair-coin-box <span class="dv">2007</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and run 10 trials</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb43"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">10</span> box<span class="dv">-1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb44"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:head</span> <span class="at">:tail</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb45"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">10</span> box<span class="dv">-2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb46"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:head</span> <span class="at">:tail</span> <span class="at">:tail</span> <span class="at">:head</span> <span class="at">:tail</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have reproducible results. We can imagine that you say to your colleague “Hey, I have this model that produce an interesting pattern. You can replicate my experiment by supplying the box creation with 2007 as the seed”.</p>
<p>In practical work, we should use better PRNG. In Clojure ecosystem, we have fastmath library providing pseudo random generation functions. Here we use mersenne twister PRNG. with initial seed 1337</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb47"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(kind/code <span class="st">"(require '[fastmath.random :as r ])"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb48"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[fastmath.random <span class="at">:as</span> r ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>we create the fastmath’s rng</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb49"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> fm-rng </span>(r/rng <span class="at">:mersenne</span> <span class="dv">1337</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>to generate random number between 0 and 1 we use drandom</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb50"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">repeatedly</span> <span class="dv">5</span> #(r/drandom fm-rng))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb51"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">0.09632861821328564</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.3382405543507081</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.4955983040708547</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.9002756268424241</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.5945809801729238</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb52"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> lcg-3 </span>(make-lcg {<span class="at">:X0</span> <span class="dv">2007</span> <span class="at">:c</span> <span class="dv">25214903917</span> <span class="at">:a</span> <span class="dv">11</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:m</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>)}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb53"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>(lcg-rand lcg<span class="dv">-3</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb54"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fl">7.130296353352605E-12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>let’s compare the fastmath mersenne twister rng with our lcg by plotting consecutive random number pair. We use red for our LCG and blue for mersenne-twister PRNG.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb55"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [m (Math/pow <span class="dv">2</span> <span class="dv">48</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>      lcg-pairs (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> <span class="dv">1000</span> #(lcg-rand lcg<span class="dv">-3</span> m))</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>                     (<span class="kw">partition</span> <span class="dv">2</span>))</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>      fm-rng-pairs (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> <span class="dv">1000</span> #(r/drandom fm-rng))</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>                        (<span class="kw">partition</span> <span class="dv">2</span>))</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>      lcg-ds (tc/dataset lcg-pairs {<span class="at">:column-names</span> [<span class="at">:x0</span> <span class="at">:y0</span>]})</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>      fm-rng-ds (tc/dataset fm-rng-pairs {<span class="at">:column-names</span> [<span class="at">:x1</span> <span class="at">:y1</span>]})</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>      ds (<span class="kw">-&gt;</span> lcg-ds</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>             (tc/add-column <span class="at">:x1</span> (tc/column fm-rng-ds <span class="at">:x1</span>))</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>             (tc/add-column <span class="at">:y1</span> (tc/column fm-rng-ds <span class="at">:y1</span>)))]</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> ds</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>      (hanami/layer-point {:=x <span class="at">:x0</span> :=y <span class="at">:y0</span> :=mark-color <span class="st">"red"</span>})</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>      (hanami/layer-point {:=x <span class="at">:x1</span> :=y <span class="at">:y1</span> :=mark-color <span class="st">"blue"</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"x","type":"nominal"},"y":{"field":"y","type":"nominal"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"width":400,"background":"floralwhite","layer":[{"mark":{"type":"circle","color":"red","tooltip":true},"encoding":{"x":{"field":"x0","type":"quantitative"},"y":{"field":"y0","type":"quantitative"}},"data":{"values":"x0,y0,x1,y1\n8.958141248882612E-5,0.0010749768714326535,0.34715782850952603,0.34151852967206375\n0.011914326919814755,0.13114717745201787,0.3811262346146913,0.5674017036766337\n0.44270853330625215,0.8698834477028292,0.873821658057977,0.09389655004289166\n0.5688075060651769,0.2569721480510019,0.3135305520348133,0.8686218979303701\n0.8267832098950763,0.09470489017989436,0.529283894702874,0.026286712091391884\n0.04184337331289356,0.46036668777588474,0.2790829387361229,0.24797006223979445\n0.06412314686878773,0.7054441968907206,0.6640871466673461,0.4577229888513761\n0.7599757471319819,0.3598227997858565,0.06611931043738162,0.40342834338509403\n0.9581403789784773,0.5396337500973054,0.8097996341847995,0.9289141979869384\n0.9360608324044151,0.2967587377826213,0.8447521537632461,0.1934376924006267\n0.2644356969428898,0.9088822477058436,0.6101636749345334,0.8956801149415912\n0.997794306098335,0.9758269484157402,0.3782802198828543,0.47738008070032767\n0.7341860139071983,0.07613573431323672,0.9728862434970287,0.5148106298716952\n0.8375826587796595,0.2134988279103105,0.6993793938137425,0.858924289450014\n0.348576688347471,0.8344331531562368,0.9596652278619153,0.03051943949610969\n0.1788542660526602,0.9674865079133177,0.15280680753999842,0.4186535923322925\n0.6424411683805502,0.06694243352010787,0.07062262490907445,0.2550902481660535\n0.7364563500552421,0.10110943194171895,0.8006605367781787,0.5518854667968551\n0.11229333269296404,0.23531624095666004,0.41236086233700564,0.9698393545232948\n0.588568231857316,0.4743401317645315,0.06928498712880304,0.5363777625223738\n0.21783103074390198,0.3962309195169773,0.09881967736675379,0.276508430285056\n0.35862969602080597,0.9450162375629212,0.8638166187276459,6.183115032099007E-4\n0.39526819452618867,0.3480397211221309,0.26996465263046576,0.8275037440770903\n0.8285265136774953,0.11388123178650389,0.7798633844356055,0.13969097801978458\n0.25278313098559835,0.7807040221756374,0.511347284501501,0.8498312520668072\n0.5878338252660669,0.4662616592607911,0.7648033193928687,0.3258734307883897\n0.12896783320275773,0.4187357465643906,0.21790000840752288,0.5866296849421835\n0.6061827935423523,0.6681003102999306,0.7040308147093111,0.8921257590998053\n0.3491929946332917,0.841212522300264,0.6879272364182054,0.11259315469237796\n0.25342732663695955,0.7877901743406106,0.6420547226273112,0.697082601315713\n0.6657814990807722,0.32368607122255,0.7069563445727571,0.6995785048321124\n0.5606363647821055,0.16708959393721656,0.7166854793574613,0.7112324001322592\n0.8380751146434378,0.2189158424118709,0.5912540801200863,0.3023906685841782\n0.40816384786463544,0.48989190784504544,0.5005483915885662,0.10745304171464531\n0.3889005676295554,0.2779958252591648,0.7660517428341209,0.3486846262560024\n0.05804365918486809,0.6385698323676046,0.6368176650665018,0.24065571101811023\n0.024357737377705746,0.26802469248881877,0.3800790876759177,0.7573068176183622\n0.9483611987110621,0.4320627671557382,0.9263833098994634,0.49455122863082157\n0.7527800200471759,0.28066980185299073,0.9202629358747878,0.11615998682402617\n0.0874574017169536,0.9621210002205451,0.6625825645972376,0.7395525036867168\n0.5834205837600521,0.41771600269462894,0.6793975335799589,0.6204763125834696\n0.5949656109749739,0.5447113020587686,0.8191687308895059,0.4795869712093599\n0.9919139039805103,0.9111425251196685,0.2242031110583227,0.5460374445455056\n0.022657357650409438,0.24932051548855938,0.5769152648663876,0.33442680174217476\n0.7426152517082087,0.16885735012435177,0.16427777449496217,0.8322470428342139\n0.857520432701925,0.43281434105523076,0.9995082818658692,0.8984700387258053\n0.7610473329415939,0.37161024369158824,0.21463563444076428,0.6993151011110641\n0.08780226194152618,0.9659144626908436,0.7963092262457196,0.803437777404068\n0.6251486709333349,0.8767249616007398,0.8231300851528816,0.6650544293674088\n0.6440641589421929,0.08479532969817782,0.8756483731858515,0.6026937267071824\n0.9328382080140116,0.26130986948818347,0.8221373671578038,0.9561661272385913\n0.8744981457040737,0.6195691840788662,0.2619448280327463,0.05738069250809841\n0.8153506062015836,0.9689462495514753,0.4226316718532974,0.9891811052380606\n0.6584983264002844,0.2435711717371838,0.6490017603128653,0.5953231164820942\n0.6793724704430772,0.4731867562079053,0.4646011867515647,0.19497029530993393\n0.20514389962101376,0.2566724771652069,0.4832124252104224,0.3767919789340386\n0.8234868301513316,0.05844471299870335,0.6593142885866379,0.34195705519550423\n0.6429814243197924,0.07288524885177239,0.6973946267970454,0.083309906642836\n0.8018273187035518,0.8201900870731258,0.6682105615027212,0.9287741684305098\n0.022180539138439315,0.24407551185688803,0.42940873744356534,9.827918158062943E-4\n0.6849202117598239,0.5342119106921182,0.8652596764557465,0.07329121078062606\n0.8764205989473552,0.6407161697549633,0.2669157759093137,0.8191350592207427\n0.04796744863865143,0.5277315163592213,0.2718449031570189,0.7252435383707037\n0.8051362612854902,0.8565884554744478,0.5659751558036612,0.3427640689726559\n0.4225625915529818,0.6482780884168555,0.042630246899608704,0.43441621306211475\n0.13114855391946634,0.4427236744481853,0.5606021666053089,0.7627644959299551\n0.8700500002640936,0.5706395842390855,0.9232031600743613,0.2794767337335644\n0.27712500796399553,0.04846466893800638,0.9412177204427692,0.11394978880843554\n0.5332009396521258,0.8652999175074392,0.5106428971129151,0.5411000022783201\n0.5183886739158865,0.7023649944088071,0.9403192652213828,0.2834429874036677\n0.7261045198309333,0.9872392994743215,0.24536304179383883,0.6869065557339269\n0.8597218755515925,0.45703021240157327,0.3036807743618455,0.31583629206592123\n0.02742191775136149,0.30173067659903197,0.9377989651432783,0.6543761262235113\n0.3191270239234072,0.5104868444915347,0.28035474493445833,0.5140756526834358\n0.6154448707409372,0.7699831594843651,0.04228813094688899,0.149593335383863\n0.469904335662072,0.16903727361684773,0.9159894469924528,0.333841137792249\n0.8594995911193806,0.4545850836472418,0.8076229673103867,0.5154625310429215\n5.255014537155489E-4,0.005870097324926604,0.5681597903243889,0.2632802583144156\n0.06466065190824821,0.7113567523247859,0.6092453830639166,0.9112446064877753\n0.8250138569067005,0.07524200730776087,0.04809121436150132,0.6250147181564176\n0.8277516617194252,0.1053578602477323,0.05031225238916859,0.7242242759673607\n0.15902604405911092,0.7493760659842756,0.6789993587813488,0.047951351988418045\n0.24322630716108762,0.6755789601060194,0.37185415492720875,0.6486207390271725\n0.4314581425002686,0.7461291488370101,0.37362128682327644,0.6944996518991964\n0.20751021854116658,0.28270198528688795,0.5630689309496375,0.15830315808893225\n0.10981141948982298,0.20801519572210836,0.3081853145600211,0.5776284523864108\n0.2882567342772475,0.17091365838377826,0.39910150115400644,0.7585890221946454\n0.8801398235556164,0.6816276404458357,0.3102604138998919,0.46755605249926546\n0.49799362623824805,0.47801946995478417,0.9574046715670013,0.7632258556158023\n0.25830375083668144,0.8414308405375515,0.40904814038293913,0.4124896872161101\n0.25582882724712164,0.8142066810523936,0.27747634344580496,0.48593779624245426\n0.9563630729103849,0.5200833833482896,0.741841711044422,0.6742997286996304\n0.7210067981652415,0.931164361151712,0.5961249940200011,0.012789988661519258\n0.24289755400288726,0.6719626753658154,0.37188589131921135,0.7761958433337348\n0.39167901035802544,0.30855869527233537,0.24737566332989203,0.338678390064153\n0.39423522932974464,0.3366771039612466,0.1568498491104473,0.8935719266386644\n0.7035377249077683,0.7390045553195073,0.5669826591863303,0.637184328265936\n0.12913968984863544,0.4206261696690454,0.8406535748375534,0.771568639732739\n0.6269774476935552,0.8968415059631631,0.49556986269286485,0.5153663009544658\n0.8653461469288501,0.5188971975514072,0.39614849567563026,0.5238625346412014\n0.7079587543995345,0.7876358797289349,0.18869418124251136,0.8086595213948586\n0.6640842583523394,0.30501642320978917,0.3208113752890216,0.9496648461038593\n0.3552702366417364,0.908062184393156,0.0749041130461352,0.02372663487685278\n0.9887736096587716,0.8765992875805431,0.6493372804044375,0.8461319376402092\n0.6426817447200293,0.0695887732543774,0.5252051893633864,0.651254172402215\n0.765566087132207,0.4213165397883323,0.1385431644859918,0.33023501131334876\n0.6345715190057106,0.9803762903968725,0.26861073416791514,0.46534303589715376\n0.7842287756996527,0.6266061140302348,0.87731616643359,0.6173729717347884\n0.8927568356666384,0.8204147736670784,0.6976803293891627,0.27205044030102443\n0.02465209167191773,0.2712625897251506,0.8187055812657231,0.7550565899124908\n0.9839780683107122,0.82384833275189,0.06333001775516611,0.28573324569402225\n0.06242124160484508,0.6867232389873514,0.09014876198886612,0.36722316043501047\n0.5540452101949214,0.0945868934781906,0.5699974319290984,0.7801047583667566\n0.040545409594152204,0.4460890868697298,0.2153808853515924,0.1475591491062198\n0.9070695369010835,0.977854487245974,0.4893727928395908,0.3796454650071659\n0.7564889410397697,0.3214679327715224,0.09144827663447752,0.2342205525103469\n0.5362368418208021,0.8986948413628788,0.9253190058929943,0.5473875132478554\n0.8857328363257224,0.7431507809170022,0.5064223948880464,0.6788010341674118\n0.17474817142107923,0.9223194669659271,0.7654034898229385,0.5283983978963684\n0.1456037179592542,0.6017304788858517,0.4839878488044773,0.5519859795064226\n0.6191248490784247,0.8104629211967271,0.728532722370562,0.441451731744694\n0.9151817144980541,0.06708844081265042,0.7217372959496269,0.9862464158138322\n0.7380624302732102,0.11877631433936742,0.8564854856042534,0.4619838321703049\n0.30662903906709715,0.37300901107212425,0.7224004683411429,0.0657741536152181\n0.10318870312742234,0.13516531573570134,0.9871765561400734,0.5766768252205743\n0.4869080544267703,0.3560781800285291,0.7017185220099065,0.28496082699804104\n0.9169495616478756,0.08653475946068667,0.5943730008627737,0.6812493832546977\n0.951971935401609,0.4717808707517541,0.6207900776756352,0.2818847358073149\n0.1896791596033509,0.08656033697091559,0.3478617978307468,0.9502540586652823\n0.952253288014127,0.47487574948945266,0.2524952229626738,0.8375345852578928\n0.2237228257180348,0.4610406642324385,0.09658039615467495,0.6420830416824888\n0.07153688789087909,0.7869953481337255,0.8565013642326118,0.33878163534861616\n0.6570384108050362,0.227512100189454,0.3102530088494728,0.5218693724984886\n0.5027226834180496,0.5300390989326011,0.0037175986396043026,0.9466462363343751\n0.8305196695926682,0.13580594685340586,0.647180097671314,0.344236608497658\n0.49395499672152,0.43359454527077546,0.38686358750596006,0.7985484860978453\n0.7696295793125856,0.4660149537724969,0.3030567299130016,0.4414454518997766\n0.12625407283152157,0.3888843824807928,0.1384055298866893,0.8007476602182155\n0.2778177886227766,0.056085256184598364,0.34981368527216894,0.01632085881948586\n0.6170273993646376,0.7873909743450689,0.5470004050041157,0.44031707643191664\n0.6613902991298133,0.2753828717620017,0.5467715872358805,0.716072612165519\n0.02930117071607441,0.32240245921087407,0.11679943999616937,0.4776368873299408\n0.5465166326536703,0.011772540524429331,0.49102905918200324,0.6593297905803055\n0.1295875271027782,0.4255523794646159,0.38508040218110673,0.5844424421991494\n0.6811657554448303,0.4929128912271885,0.2783930107902286,0.18241772639199283\n0.4221313848331292,0.6435348144984765,0.7773002703870981,0.2377771897032277\n0.07897254081729699,0.8687875303243224,0.11219449959705075,0.9999396082233822\n0.5567524149016023,0.1243661452516811,0.7072327325223622,0.6478470262589608\n0.3681171791025477,0.04937855146208037,0.14248544679097885,0.6043882868946624\n0.5432536474169396,0.9758797029203912,0.504251366477249,0.0029286429996848717\n0.7347663134583584,0.08251902937599809,0.5171850792457588,0.45852590592648523\n0.9077989044700345,0.9858775305044354,0.34393616382457304,0.06975861067963529\n0.8447424168828448,0.2922561670453483,0.46309261249378797,0.1058803272922193\n0.21490741883288678,0.3640711884958101,0.6687905943651988,0.36046270728186647\n0.004872654787966724,0.05368878400168953,0.2871143161780114,0.5962360249953225\n0.5906662053526404,0.49741784021309954,0.710515241037097,0.297927745337097\n0.4716858236781505,0.1886336417937109,0.14959854362870728,0.03414210357559333\n0.0750596410648754,0.8257456330476849,0.7154067228568866,0.9198459243792767\n0.08329154485858936,0.9162965747785385,0.44665320715489853,0.27062472219692313\n0.07935190389797953,0.8729605242118303,0.4699237586489913,0.15497394971292655\n0.6026553476641894,0.6292984056401387,0.8722080492576294,0.9447403442885096\n0.9223720433755815,0.1461820584654525,0.0016143193840347791,0.03442130756462092\n0.6080922244540332,0.6891040503284209,0.0050365183178979755,0.3478204519934245\n0.5802341349466857,0.38266506574759873,0.5952758885208085,0.19335543425436708\n0.20940530455764161,0.3035479314681133,0.4210023851321334,0.932659694480046\n0.3391168274833021,0.7303746836503784,0.7886595447964619,0.7642333395541665\n0.03421110148821782,0.3764116977044516,0.8353972503537961,0.6934482635006427\n0.14061825608302314,0.5468903982473101,0.8936438046393895,0.30284149965897633\n0.01588396205446685,0.1748131639331909,0.7195999703828118,0.3934935742578558\n0.9230343845991555,0.15346781192476655,0.07387658194894198,0.18169977233532109\n0.6882355125064876,0.5706802189054194,0.09115738181630983,0.6242701876374119\n0.2775719892936692,0.053381463564416975,0.7926622012334261,0.2953730297930033\n0.5872856805426423,0.46023206730312083,0.7380023260309203,0.18746278920437498\n0.06264232166838468,0.6891551196862871,0.7061445175480605,0.8163619682003782\n0.5807958978832133,0.3888444580494017,0.743611900310434,0.5678020109963595\n0.27737861987747436,0.05125439998627357,0.7761594152412541,0.8855250851065288\n0.5638879811830648,0.20285737434776863,0.8717782768466391,0.5954759264994651\n0.23152069915951046,0.5468172720886706,0.5114683170459629,0.7567722609887875\n0.015079574309432076,0.1659648987378084,0.970937019091614,0.5832832425943275\n0.8257034674499479,0.08282772328348287,0.2727583416725514,0.6254687309063693\n0.9111945374523671,0.02322949331009383,0.2583279344043885,0.9046793486996649\n0.2556140077450877,0.8118436665300202,0.19187992490195382,0.013391071931380338\n0.9303699131642773,0.23415862614110594,0.8016451679971479,0.3950918786685411\n0.5758344688862209,0.33426873908248567,0.2953308168500759,0.8624734666050977\n0.6770457112413979,0.4475924049894324,0.46934927810909244,0.38008779877461274\n0.9236060362178122,0.15975597972999012,0.10045203482818987,0.5315950260885578\n0.7574053583639468,0.33154852333747087,0.4041784879130357,0.79494244924103\n0.6471233380462351,0.11844629984264188,0.7799747865985882,0.27765730000566435\n0.3029988796031162,0.333077256968334,0.7954050913672635,0.5575570141403179\n0.6639394079857297,0.3034230691770823,0.26875395378899025,0.26155230242317784\n0.3377433422819607,0.715266346435623,0.48791642572824934,0.25539165454096424\n0.868019392125909,0.548302894719054,0.6740320503221129,0.11479060019407172\n0.031421423243649826,0.34572523701420366,0.06891964478996115,0.6585875205275666\n0.8030671884902958,0.8338286547273093,0.4171993842318231,0.049428214340365706\n0.17220478333445755,0.8943421980130886,0.6269769330161377,0.9421736547515414\n0.8378537594780298,0.2164809355923829,0.3469493203360172,0.8951355580976865\n0.38137987285026753,0.19526818268699841,0.21918772624456628,0.36794580427988866\n0.14803959089103813,0.628525081135475,0.9721177070231293,0.8124005386078221\n0.9138654738242806,0.05260979340114247,0.5426673777276318,0.9872795877012459\n0.5787973087466227,0.36685997754690547,0.12757667377032833,0.09847926082781999\n0.03554933435001573,0.39113225918422856,0.7338141407730059,0.9124091787815707\n0.3025444323605697,0.32807833730032243,0.24116680131688173,0.48172820906132685\n0.6089512916376023,0.698553789347681,0.18338435958595456,0.8464051577554434\n0.6841812641585463,0.5260834870780648,0.1018446329954319,0.878990927237908\n0.7870079391927689,0.6571769124545135,0.3442521129294027,0.44458390809323145\n0.2290356183337039,0.5194813830047984,0.6215536863476405,0.5679648536828621\n0.714384794386838,0.8583223195892735,0.6389827114454099,0.036210627156501474\n0.4416350968160643,0.8580756463107626,0.5025157933816788,0.033751780737533155\n0.43892169075244425,0.8282281796109423,0.6167469652543334,0.6792777316536043\n0.11059955705442093,0.21668470893268577,0.9673626848703689,0.19371580750049588\n0.383621379593599,0.21992475686364443,0.7187663240607651,0.32554518257053644\n0.4192619068341443,0.6119705565096432,0.7740058200446422,0.5054213453672485\n0.7317657029401303,0.04951231367548914,0.2040213780953295,0.8178106575021569\n0.5447250317644361,0.9920649307428526,0.0024398729687724607,0.9529845718981962\n0.9128038195054344,0.04093159589383433,0.2734789362699164,0.49949886020412193\n0.45033713616623317,0.9537980791626204,0.4507337381709213,0.39251562257335504\n0.4918684521228798,0.4106425546857331,0.7800961310981598,0.961710232961952\n0.5171576828771194,0.6888240929823688,0.8140813009270926,0.3643392500174989\n0.5771546041401123,0.34879022687529115,0.8927452079511562,0.6292390072252891\n0.8367820769622583,0.2046924279188964,0.8393821684305942,0.4086917240312884\n0.2517062884419161,0.7688587541951328,0.19447664986496416,0.06874995923069482\n0.4575358774805167,0.032984233619739456,0.8066956751887637,0.4808588009749504\n0.3629161511511896,0.992167243997141,0.3666345888636746,0.9638436044127996\n0.9139292653026061,0.05331149966272264,0.47774396065134517,0.7738622113673372\n0.5865160776240046,0.4517664351981061,0.7203216830053543,0.9909591494084342\n0.9695203685132228,0.664813634979506,0.5343457380972603,0.6960286265596016\n0.31303956610862116,0.4435248085288883,0.17279659102484168,0.8798252620560685\n0.878862475151827,0.6675768080041529,0.835837473809347,0.855328261851285\n0.3434344693797371,0.7778687445111636,0.3394260753994296,0.2284346797199559\n0.5566457709568553,0.12319306185946388,0.6887207864216323,0.17546274453593114\n0.35521326178815826,0.9074354610037965,0.13067117514783977,0.22084974422650094\n0.9818796523758166,0.8007657574680387,0.22949996821276497,0.6653641528875862\n0.8085129134824811,0.8937316296413478,0.8401802473500481,0.236026813671792\n0.8311375073888811,0.14260216261174818,0.885660520146442,0.4346592554392812\n0.5687133700632856,0.2559366520301971,0.22313854883650142,0.9770970778168071\n0.8153927536662238,0.969409871662517,0.38514187126534605,0.20918591790723085\n0.6635981696217428,0.2996694471732262,0.818753200107559,0.3636449294199431\n0.29645350023954364,0.26107808396903565,0.5897916842722919,0.9209683556901125\n0.8719485049934477,0.5915231362619799,0.6663810784877833,0.1507144265732101\n0.5068440802158349,0.5753744637082399,0.46649016881365757,0.1483930315172879\n0.329208682124694,0.6213850847056896,0.8059488793903045,0.7285381184974369\n0.8353255130966417,0.18867022539711442,0.06012812769373488,0.5688086434361959\n0.0754620607023142,0.8301722490595118,0.43955944600714814,0.6174926738459683\n0.1319843209886855,0.4519171122095962,0.6817904747413404,0.5345596427833157\n0.9711778156396136,0.683045553369805,0.5803527584304284,0.2832809163830128\n0.5135906684019105,0.6495869337550708,0.39444948693141857,0.8370924221892997\n0.14554585263983455,0.6010939603722356,0.7176928855074058,0.878872816750794\n0.6121231454286473,0.7334441810491761,0.5501179526947151,0.2685822004570966\n0.06797557287499245,0.7478208829589725,0.03554231418747289,0.9331757852964198\n0.22611929388275342,0.48740181404434324,0.24192485120822615,0.1404327858276948\n0.3615095358218312,0.9766944753741988,0.4924418595662601,0.0726056453963082\n0.7437288104502429,0.18110649628672704,0.024551414946669903,0.9028559375481684\n0.992261040488053,0.9149610267026382,0.6437076327238813,0.5853984362339735\n0.06466087506307616,0.7113592070278933,0.3466262417606478,0.467715006191177\n0.8250408586408824,0.07553902638376186,0.05894856958509065,0.9558317621029708\n0.8310188715554361,0.14129716844385243,0.5506392337033552,0.531444760424914\n0.5543584342164323,0.09803235771481056,0.5904098259972725,0.626808569091958\n0.07844551619697171,0.8629902595007444,0.08777856112197191,0.6938496907047409\n0.49298243584224366,0.42289637559873583,0.9913041436467376,0.45411602220041036\n0.6519497129201497,0.1715364234557022,0.2307261160580767,0.3646519035290081\n0.8869902393467797,0.756982214148632,0.10554665636365645,0.7502284026377508\n0.32689393696900737,0.5959228879931366,0.913404756566889,0.9074930021957652\n0.5552413492585586,0.10774442317820032,0.8260363443007142,0.27412522844776266\n0.1852782362942591,0.03815018057090569,0.6887924265051908,0.5492521938085253\n0.41974156761401815,0.6172468250882552,0.953585261756599,0.2982160044502207\n0.7898046573048632,0.6879408116875503,0.2603849401600733,0.3114207452701241\n0.5674385098971086,0.24191319020225066,0.12578681844737472,0.691766179823383\n0.6611346735588128,0.27257099048099676,0.7240110736120928,0.11988988968453818\n0.9983704766250199,0.9821648242092742,0.663777221614801,0.809467090844274\n0.8039026476360718,0.8430187053308451,0.9882012035006429,0.15495243820052762\n0.27329533997335176,0.00633832104092491,0.4934345867228527,0.4011590662434912\n0.06981111278422958,0.7680118219605809,0.055352104292986315,0.6804448018878981\n0.4482196229004458,0.9305054332389595,0.7790999881500653,0.9039483389639029\n0.2356493469626102,0.5922323979227677,0.3609642873781369,0.10470883369513251\n0.5146459584845005,0.6611951246635606,0.7189925353321625,0.9778396716343838\n0.27323595263322176,0.005685060299494893,0.1601330792827853,0.35280067914123014\n0.06262524462849939,0.6889672722475488,0.9258876835129053,0.7941519141877535\n0.5787295760570927,0.36611491796207574,0.5895624939020851,0.6656100091985695\n0.02735367891688867,0.3009800494198309,0.9976534069051766,0.456789769646168\n0.3108701249521957,0.41966095580820806,0.7328652076633497,0.16048179758740222\n0.6163600952243442,0.7800506288018418,0.911413059570316,0.4269661567349088\n0.5806464981543158,0.3872010610315293,0.6443972500298392,0.446028544067409\n0.2593012526808778,0.8524033608237112,0.7173736371907313,0.7739660864980822\n0.37652655039487826,0.1418816356777164,0.5505794718825594,0.4809224831738199\n0.5607875737889358,0.16875289301234986,0.7842384392857433,0.30314953758980234\n0.856371404469904,0.42017503050299965,0.18472239563851,0.37775847508230975\n0.6220149168670517,0.8422536668716241,0.34646366893793457,0.9306335867916831\n0.26487991692192026,0.9137686674751784,0.24943027548055818,0.045925867284936306\n0.0515449235610177,0.5670837405052502,0.2194671983025276,0.2011451930996413\n0.23801072689180813,0.618207577143945,0.18926901943110952,0.8016995620861858\n0.8003729299174509,0.8041918104260155,0.34280145357988956,0.19566465847637393\n0.8461994960202261,0.3082840375565432,0.9541847274370729,0.1699799320964459\n0.3912139944560309,0.30344352035039535,0.1722090696050571,0.21381437258855773\n0.33796830518840437,0.7177409384065037,0.22247087411817756,0.5852879559414512\n0.8952399038055958,0.8477285231956095,0.8457093071362554,0.5153609844846359\n0.3251033364857605,0.5762262826774212,0.07541204559916914,0.07698152432294214\n0.33857869078568825,0.7244551799766263,0.7205977771618173,0.3217490265867906\n0.9690965610769453,0.6601517531804539,0.09980586175720108,0.7118875487374561\n0.2617588663190489,0.8794371108435932,0.4129580039604255,0.020270415077912274\n0.673897800613581,0.41296538808344607,0.8971659007270769,0.5290279348711127\n0.5427088502519624,0.9698869341056415,0.007371735132554624,0.28240270557376035\n0.6688458564961124,0.35739400279129185,0.6046835567731954,0.2772739896069789\n0.931423612038266,0.2457493137549811,0.5133600918711339,0.48778641897151\n0.7033320326388477,0.7367419403613802,0.6850838777360599,0.6727567563238257\n0.10425092530923763,0.1468497597356695,0.1272389482831766,0.276324777903004\n0.61543693842642,0.7698959040246756,0.7146783137340298,0.5560071349754785\n0.4689445256054867,0.15847936299440946,0.16528885795511217,0.11944709034654077\n0.7433625742725596,0.177077898332211,0.5983709151626193,0.8578081190217133\n0.9479464629883765,0.42750067420619686,0.7027011857386931,0.497328099244007\n0.702596997602221,0.7286565549584871,0.4706542685181534,0.14177711708331509\n0.01531168587741405,0.1685181259856101,0.16897687361792157,0.876456200908631\n0.8537889671757668,0.39176822026749036,0.5890576838074413,0.39135885762506284\n0.30954000427644957,0.4050296283750008,0.46150754564670615,0.8589611654136726\n0.4554154934590642,0.009660009383761547,0.008314168724026239,0.8587127354898678\n0.10634968455543259,0.16993611144381404,0.8011974907802208,0.8030753879581121\n0.86938680721601,0.5633444607101659,0.6940609567327862,0.5274601716009975\n0.19687864914588005,0.16575472193873608,0.7326425264008565,0.4838797766663765\n0.8233915226601525,0.05739633059573279,0.6517366909487103,0.7163580071217082\n0.6314492178871163,0.9460309780923346,0.6993663569189581,0.9998579066079931\n0.40643034034973624,0.4708233251811542,0.739989188356148,0.29252224621421585\n0.17914615832675196,0.9706973229283271,0.25244932422295996,0.24450211167221414\n0.6777601335456538,0.4554510503362472,0.28540687521310026,0.8521326984277013\n0.010051135032774994,0.1106520666945805,0.4838411783482679,0.28126910115846226\n0.21726231497444104,0.389975046052907,0.2579637827502297,0.5821436770635859\n0.2898150879160326,0.18805554841041427,0.7625723741947328,0.02622591640243499\n0.06870061384861259,0.7557963336687941,0.1155381428098663,0.20412526645803264\n0.31384925169079025,0.45243134993274836,0.5296175365231077,0.9774522009882793\n0.9768344305942875,0.7452683178712185,0.9614293648314263,0.6103032403698749\n0.19804107791745906,0.17854143842610526,0.411560258360254,0.23657413712655728\n0.9640454040212134,0.6045890255674031,0.3457523202718804,0.12759915117265508\n0.65056886257549,0.15634706966444512,0.5163073312777371,0.39995427100084346\n0.7199073476429518,0.9190704054065257,0.4665834537381186,0.24890194592459514\n0.10986404080583867,0.20859403019828093,0.5915657053049683,0.3403985251433821\n0.29462391351514583,0.2409526300006597,0.7529044032869268,0.8630993170884373\n0.6505685113413122,0.15634320608848995,0.46880831280715474,0.7138520954736858\n0.719864848307445,0.9186029127159507,0.33289674462164,0.13001850503326984\n0.10472162120951367,0.15202741463870595,0.8537295008899428,0.37020831328073767\n0.672391142359821,0.3963921472920866,0.7714730608780247,0.5491847377306853\n0.3604032015470082,0.964524798351146,0.7969277180219705,0.029453746918137735\n0.6098623631966618,0.7085755764973349,0.02238984224828444,0.3285905666649118\n0.7944209228047399,0.738719732186194,0.8722283641544235,0.4960249652390616\n0.1260066353821898,0.3861625705381435,0.9839977871018863,0.2694383110151728\n0.2478778572536342,0.7267460111240318,0.2945531136831081,0.06999224840710272\n0.9942957036984055,0.9373423220165158,0.028510402633904697,0.48745550445507324\n0.3108551235157293,0.4194959400070779,0.9151906411514703,0.6821644088057999\n0.6145449214119125,0.7600837168650934,0.8485881616341961,0.984931350876191\n0.3610104668500824,0.9712047166849622,0.2978866998713108,0.7717084647348458\n0.68334146486864,0.5168456948890956,0.37760009664387173,0.5420733242266536\n0.6853922251141071,0.539404057589234,0.6050552859157763,0.7657938734043734\n0.93353421481563,0.26896594430598597,0.7766133064637728,0.7938312075929119\n0.9587149686999012,0.5459542370329693,0.25802543184333593,0.8508720413044106\n0.0055861886967178975,0.06153765699795244,0.8795818572088807,0.962301250373701\n0.6770038083115324,0.4471314727609119,0.15112359444407542,0.11303997441800795\n0.9185357817040867,0.10398318007900897,0.3114145750367836,0.9136578462759504\n0.14390456220315428,0.5830397655687527,0.8215747188848981,0.9819769937675107\n0.41352700259033526,0.5488866098277434,0.995133420359259,0.06635659195124055\n0.03784228943923296,0.4163547651656181,0.7545886152351899,0.5961713488712357\n0.5799919981558546,0.3800015610484557,0.31297807056038573,0.8765865252081031\n0.18010675286706856,0.9812638628718098,0.8765443430562676,0.531767445486816\n0.7939920729239631,0.7340023834976499,0.057470055024236855,0.735477762258568\n0.07411579980820449,0.8153633792243049,0.9250685138867476,0.9671101289991253\n0.9690867528014095,0.6600438621495606,0.9426188200503312,0.7922943380779164\n0.2605720649792218,0.8663822961054954,0.23530031886854097,0.3438107896767846\n0.5302948384945054,0.8333328047736153,0.37577840160933573,0.5455120623390644\n0.1667504338438235,0.8343443536161139,0.0021426650448077567,0.6826175140690354\n0.1778774711113087,0.9567417635584512,0.22897712505909773,0.49383791641187136\n0.5242489804770187,0.7668283665812616,0.890378689747793,0.6493564270792669\n0.43520161372793353,0.7873073323413244,0.892239548248277,0.2842401198910427\n0.6604702370886244,0.265262189308924,0.5150099934444656,0.023797129750224633\n0.9179736637322193,0.09779988238846826,0.8512330693375674,0.6992017778189412\n0.07588828760720645,0.8348607450133265,0.8572711898624494,0.8699366188239468\n0.1835577764806473,0.019225122621175927,0.18593706145877653,0.015908161690310285\n0.21156593016699077,0.327314813170954,0.7501422280048584,0.22098908984643395\n0.6005525262145497,0.6061673696941021,0.32779221918855606,0.7103160696702842\n0.6679306479691789,0.3473267089950234,0.5048614571274341,0.20764852700048708\n0.8206833802793128,0.0276067644064959,0.8961981406866892,0.1167159739241952\n0.30376398980551045,0.3414934691946705,0.35647885997545026,0.07759789273302031\n0.756517742475431,0.3217847485637968,0.7298009597399897,0.8833570254632257\n0.5397218155358203,0.9370295522280792,0.15598315280562636,0.11232365183057458\n0.30741465584292627,0.3816507956062445,0.09289034946924857,0.6022897095796298\n0.19824833300274491,0.18082124436424962,0.7237196735906706,0.588808353677446\n0.9891232693408014,0.8804455440828711,0.5374611698982747,0.9653783362109811\n0.6849905662456379,0.5349858100360727,0.517497517451067,0.06312020161189236\n0.8849334917308553,0.7343579903734643,0.7692623260632374,0.9253184812791391\n0.0780274754421626,0.8583918111978441,0.6412389680997066,0.257755346522051\n0.44239950451034105,0.8664841309478071,0.06898503202777961,0.2213927177324284\n0.5314150217599334,0.8456548206933228,0.4631596392367163,0.32145240230124683\n0.30229260896060595,0.325308279900721,0.4682010536721859,0.9850796758994136\n0.5784806602419863,0.36337684399590486,0.3273249736802317,0.08071578757493136\n0.9972348652890091,0.9696730995131553,0.4677870817875247,0.09864744764876354\n0.6664936759787636,0.33152001710045553,0.9964185480299566,0.7051153163210373\n0.6468097694390664,0.11499704516378628,0.5070739448516435,0.9294033753726327\n0.26505707813570467,0.915717440826807,0.33853189243332316,0.764602386345314\n0.07298143042893201,0.8028853160523077,0.5098308146936776,0.35295182469169184\n0.8318280579094406,0.15019821833790203,0.014249817596298842,0.27127405718073794\n0.6522699830509779,0.17505939489481293,0.37979911757334195,0.38676422526384346\n0.9257429251769977,0.18326175828103075,0.8240440322777689,0.10140207606843843\n0.015968922425393828,0.17574772801338767,0.7352501710218693,0.48511171892019056\n0.93331458948132,0.2665500656285751,0.6083100485898763,0.6686408156336945\n0.9321403032483815,0.2536329170662519,0.08064098676602138,0.39784416626269925\n0.7900516690628265,0.6906579410251474,0.6455950960705161,0.9708638881345195\n0.5973269326106774,0.5706858400515067,0.2692520680211177,0.5518801523009664\n0.27763382190062913,0.05406162224097599,0.24496527971950344,0.23084566407241947\n0.5947674259847915,0.5425312671667619,0.5615577929565159,0.8094531169425212\n0.9679335201684367,0.6473583031868593,0.9506136385496295,0.2924259233977109\n0.12103091638950758,0.33142966161863896,0.4181278104520352,0.46875622601295897\n0.6458158591390841,0.10406403186398094,0.6651090247882441,0.6691240396521805\n0.14479393183784595,0.592822831550361,0.5579983447002941,0.8788958308954788\n0.5211407283880263,0.7326375936023446,0.8726007267320242,0.18999366810756024\n0.059103110959846106,0.6502238018923627,0.06479167397971763,0.4057096464628531\n0.1525514021500456,0.678155004984557,0.1182235346550018,0.8739151922402029\n0.45979463616418315,0.05783057914007017,0.04494661719837101,0.6148097234496388\n0.6362259518748274,0.9985750519571575,0.9771357066799826,0.18550088053620883\n0.9844151528627876,0.8286562628247189,0.9189463659784947,0.655487277985165\n0.11530847240596387,0.2684827777996581,0.8117036802643294,0.12658360308435412\n0.9534001371302949,0.4874910897672997,0.7644326755855819,0.1972779478118316\n0.3624915687743524,0.987496837851932,0.3407015459860008,0.8499080980497686\n0.8625547977053074,0.48819235609243705,0.9885685221323017,0.5903047003146156\n0.37020549835086314,0.07235006319355008,0.37094580575169167,0.6048709436278104\n0.7959402764631065,0.7554326224282271,0.9513159252391068,0.7304871339219603\n0.30984842804455326,0.4084222898241414,0.09607088269973274,0.20684926602526277\n0.49273476939961114,0.4201720447297781,0.6189012192846035,0.14512423091905613\n0.6219820733616146,0.8418923883118161,0.722987898607937,0.8830084761235777\n0.2609058527640329,0.8700539617384173,0.16941131591653003,0.03714870237805501\n0.570683160456646,0.2776043463571618,0.1837642778216011,0.39247313463918077\n0.05373739126283539,0.5912008852252448,0.11513174518056868,0.6705821507466627\n0.5032993188117487,0.5363820882632915,0.27599069750333394,0.6102829638242802\n0.9002925522302618,0.9033076558669357,0.37068326497406345,0.4889315879950944\n0.9364737958703486,0.30130133590789043,0.7244782418707243,0.46632665532586026\n0.31440427632085033,0.4585366208634092,0.7829527919031098,0.853640675430049\n0.04399241083155658,0.484006100481178,0.4555975923429363,0.3131735965760345\n0.32415668662701336,0.5658131342312025,0.9692093809549847,0.04988179155007333\n0.22403405787728303,0.4644642179841689,0.48651882673018654,0.16250215749691765\n0.10919597915991375,0.2012453520931068,0.810435891729621,0.5068553834938685\n0.21378845435823024,0.3517625792745882,0.41905783420291276,0.41127324714845837\n0.8694779533545258,0.5643470682338396,0.983969004353197,0.15890754609545588\n0.2079073319062914,0.287070232303261,0.21229360566269118,0.1787110361671862\n0.15786213666992666,0.7365730847032488,0.5875702055760124,0.5784571059383483\n0.10239351306979216,0.12641822510176937,0.27945549617175525,0.8310676258425684\n0.3906900574535186,0.29768021332276007,0.9760329345989303,0.9863527660841607\n0.2745719278844163,0.02038078806263499,0.2049799675542625,0.6869786427253262\n0.22427825002304047,0.46715033158750074,0.13094507793077592,0.09792336180739025\n0.13874322879656376,0.5262650980962569,0.8904381708650184,0.26952443979392027\n0.7890056603928812,0.679151845655749,0.08762773443584826,0.18452786286054845\n0.47075988354729503,0.17844830035430093,0.581173409701897,0.0628801457567223\n0.9630208852313658,0.5933193188790788,0.978048473003458,0.5457902081922532\n0.5266020890039229,0.7927125603772076,0.08167083700785782,0.9517987375979287\n0.7199277454833393,0.9192947816507875,0.5128094727751307,0.16178577453250131\n0.1123321794927179,0.23574355575395245,0.38354184492205,0.10971504885341887\n0.5932686946275325,0.5260452222369132,0.8232943541258668,0.22902613936116967\n0.7865870259401007,0.6525468666751628,0.5368408781711196,0.6893853067149351\n0.17810511476084656,0.9592458437033677,0.8781953436980274,0.7025586820513672\n0.5517938620711007,0.06982206411616332,0.7551272457635774,0.7078104145557342\n0.7681322866118521,0.4495447340644283,0.7435339286042704,0.6891526608605814\n0.9450816560427668,0.3959877978044908,0.9032471094825285,0.13384729622583924\n0.35595535718345417,0.9155985103520514,0.9529126043089395,0.014956021003151632\n0.07167319520662119,0.7884947286068886,0.030745047512824142,0.8843172184592687\n0.6735315960098305,0.40893713744219085,0.11029477518810293,0.6676452250275862\n0.49839809319815487,0.4824686065137591,0.3785816507037312,0.9806072415275793\n0.3072442529854058,0.37977636417351945,0.6935339533801193,0.4983463588227077\n0.17762958724276956,0.9540150410045207,0.05887298841038646,0.15762086914543905\n0.49425503238378354,0.43689493755567455,0.16071466705184667,0.8561926664648154\n0.8059338944464756,0.8653624202452868,0.5401105092638174,0.8977276937328038\n0.5190762040322099,0.7099278256883643,0.6688040379369231,0.895932750118241\n0.8092956639060631,0.9023418843007498,0.5448302695970832,0.8121641565486639\n0.9258503086423033,0.18444297639939222,0.31588952204868725,0.6734220610357295\n0.02896232172737001,0.3186751203351257,0.036964981980611045,0.4255070259498852\n0.5055159050204381,0.5607645365588745,0.6778759440587001,0.26568305374760603\n0.16849948348167487,0.8535838996324792,0.8349264853788709,0.8125915251598237\n0.3895124772913263,0.2847268315386451,0.4355159123990586,0.8565076677081584\n0.13208472825915152,0.45302159218472227,0.18954757467276306,0.7133985327257091\n0.9833270953660005,0.816687630360061,0.317380446615078,0.20559090132574198\n0.9836535152947263,0.8202782495760452,0.8410427337872595,0.18211702660370688\n0.023150326670553056,0.2547431747101392,0.4539655937603677,0.32374839923177356\n0.8022645031455866,0.8249991159355083,0.10019403653149483,0.8820485756682246\n0.07507985662464733,0.8259680042051762,0.26741564892555814,0.6188197441845398\n0.08573762759099424,0.9432034848349922,0.8617464260458951,0.23641064465954909\n0.3753279145189694,0.12869664104271905,0.33034765930264864,0.9203297170371545\n0.4157526328039651,0.573368542177672,0.08598782658883741,0.41410936153680455\n0.30714354528844723,0.3786685795069751,0.3596076688736103,0.10513071096350801\n0.16544395591078143,0.8199730963526513,0.10836619452311735,0.9344276316918603\n0.01979364121321936,0.21781963467946852,0.3538981233584959,0.7334849932342442\n0.3961055628082093,0.35725077222435786,0.8707374664312895,0.5292210624798099\n0.929848075801992,0.22841841515596784,0.4796781949894391,0.21510454046195804\n0.5126921480497018,0.6397032098807749,0.37978269022634814,0.05963770388517764\n0.03682489002257938,0.40516337158242877,0.3758855260573608,0.047477702070460204\n0.456886668740772,0.025842937482547512,0.6078353827791272,0.8032165399475164\n0.2843618936420782,0.12807041139691577,0.8957005034281336,0.6050832537208684\n0.40886410670012907,0.49759475503547534,0.6549503016486138,0.7308814192021507\n0.47363188672428436,0.2100403353011835,0.32415639180463995,0.317450211692776\n0.31053326964707395,0.415955547451869,0.642392281821774,0.2642147847833747\n0.5756006033046148,0.3316962176848186,0.4990344244544376,0.5319907249945002\n0.6487479758670602,0.13631731587171814,0.3991151325741402,0.06676778656695714\n0.49958005592295507,0.4954701964865613,0.6399499768681487,0.1597823730523913\n0.4502617426862301,0.9529687508825866,0.4256575773911597,0.11565424730480167\n0.48274584104250806,0.31029383280164424,0.9344610346452362,0.2317588577374181\n0.41332174215214224,0.5466287450076202,0.6870460513276127,0.6224850648404066\n0.013005776417877257,0.1431531219307054,0.9171304436573056,0.7152353266860472\n0.5747739225718149,0.3226027296240197,0.2290058074703729,0.8631665961278989\n0.5487196071982723,0.03600526051505071,0.9874410837316698,0.5165967855602149\n","format":{"type":"csv"}}},{"mark":{"type":"circle","color":"blue","tooltip":true},"encoding":{"x":{"field":"x1","type":"quantitative"},"y":{"field":"y1","type":"quantitative"}},"data":{"values":"x0,y0,x1,y1\n8.958141248882612E-5,0.0010749768714326535,0.34715782850952603,0.34151852967206375\n0.011914326919814755,0.13114717745201787,0.3811262346146913,0.5674017036766337\n0.44270853330625215,0.8698834477028292,0.873821658057977,0.09389655004289166\n0.5688075060651769,0.2569721480510019,0.3135305520348133,0.8686218979303701\n0.8267832098950763,0.09470489017989436,0.529283894702874,0.026286712091391884\n0.04184337331289356,0.46036668777588474,0.2790829387361229,0.24797006223979445\n0.06412314686878773,0.7054441968907206,0.6640871466673461,0.4577229888513761\n0.7599757471319819,0.3598227997858565,0.06611931043738162,0.40342834338509403\n0.9581403789784773,0.5396337500973054,0.8097996341847995,0.9289141979869384\n0.9360608324044151,0.2967587377826213,0.8447521537632461,0.1934376924006267\n0.2644356969428898,0.9088822477058436,0.6101636749345334,0.8956801149415912\n0.997794306098335,0.9758269484157402,0.3782802198828543,0.47738008070032767\n0.7341860139071983,0.07613573431323672,0.9728862434970287,0.5148106298716952\n0.8375826587796595,0.2134988279103105,0.6993793938137425,0.858924289450014\n0.348576688347471,0.8344331531562368,0.9596652278619153,0.03051943949610969\n0.1788542660526602,0.9674865079133177,0.15280680753999842,0.4186535923322925\n0.6424411683805502,0.06694243352010787,0.07062262490907445,0.2550902481660535\n0.7364563500552421,0.10110943194171895,0.8006605367781787,0.5518854667968551\n0.11229333269296404,0.23531624095666004,0.41236086233700564,0.9698393545232948\n0.588568231857316,0.4743401317645315,0.06928498712880304,0.5363777625223738\n0.21783103074390198,0.3962309195169773,0.09881967736675379,0.276508430285056\n0.35862969602080597,0.9450162375629212,0.8638166187276459,6.183115032099007E-4\n0.39526819452618867,0.3480397211221309,0.26996465263046576,0.8275037440770903\n0.8285265136774953,0.11388123178650389,0.7798633844356055,0.13969097801978458\n0.25278313098559835,0.7807040221756374,0.511347284501501,0.8498312520668072\n0.5878338252660669,0.4662616592607911,0.7648033193928687,0.3258734307883897\n0.12896783320275773,0.4187357465643906,0.21790000840752288,0.5866296849421835\n0.6061827935423523,0.6681003102999306,0.7040308147093111,0.8921257590998053\n0.3491929946332917,0.841212522300264,0.6879272364182054,0.11259315469237796\n0.25342732663695955,0.7877901743406106,0.6420547226273112,0.697082601315713\n0.6657814990807722,0.32368607122255,0.7069563445727571,0.6995785048321124\n0.5606363647821055,0.16708959393721656,0.7166854793574613,0.7112324001322592\n0.8380751146434378,0.2189158424118709,0.5912540801200863,0.3023906685841782\n0.40816384786463544,0.48989190784504544,0.5005483915885662,0.10745304171464531\n0.3889005676295554,0.2779958252591648,0.7660517428341209,0.3486846262560024\n0.05804365918486809,0.6385698323676046,0.6368176650665018,0.24065571101811023\n0.024357737377705746,0.26802469248881877,0.3800790876759177,0.7573068176183622\n0.9483611987110621,0.4320627671557382,0.9263833098994634,0.49455122863082157\n0.7527800200471759,0.28066980185299073,0.9202629358747878,0.11615998682402617\n0.0874574017169536,0.9621210002205451,0.6625825645972376,0.7395525036867168\n0.5834205837600521,0.41771600269462894,0.6793975335799589,0.6204763125834696\n0.5949656109749739,0.5447113020587686,0.8191687308895059,0.4795869712093599\n0.9919139039805103,0.9111425251196685,0.2242031110583227,0.5460374445455056\n0.022657357650409438,0.24932051548855938,0.5769152648663876,0.33442680174217476\n0.7426152517082087,0.16885735012435177,0.16427777449496217,0.8322470428342139\n0.857520432701925,0.43281434105523076,0.9995082818658692,0.8984700387258053\n0.7610473329415939,0.37161024369158824,0.21463563444076428,0.6993151011110641\n0.08780226194152618,0.9659144626908436,0.7963092262457196,0.803437777404068\n0.6251486709333349,0.8767249616007398,0.8231300851528816,0.6650544293674088\n0.6440641589421929,0.08479532969817782,0.8756483731858515,0.6026937267071824\n0.9328382080140116,0.26130986948818347,0.8221373671578038,0.9561661272385913\n0.8744981457040737,0.6195691840788662,0.2619448280327463,0.05738069250809841\n0.8153506062015836,0.9689462495514753,0.4226316718532974,0.9891811052380606\n0.6584983264002844,0.2435711717371838,0.6490017603128653,0.5953231164820942\n0.6793724704430772,0.4731867562079053,0.4646011867515647,0.19497029530993393\n0.20514389962101376,0.2566724771652069,0.4832124252104224,0.3767919789340386\n0.8234868301513316,0.05844471299870335,0.6593142885866379,0.34195705519550423\n0.6429814243197924,0.07288524885177239,0.6973946267970454,0.083309906642836\n0.8018273187035518,0.8201900870731258,0.6682105615027212,0.9287741684305098\n0.022180539138439315,0.24407551185688803,0.42940873744356534,9.827918158062943E-4\n0.6849202117598239,0.5342119106921182,0.8652596764557465,0.07329121078062606\n0.8764205989473552,0.6407161697549633,0.2669157759093137,0.8191350592207427\n0.04796744863865143,0.5277315163592213,0.2718449031570189,0.7252435383707037\n0.8051362612854902,0.8565884554744478,0.5659751558036612,0.3427640689726559\n0.4225625915529818,0.6482780884168555,0.042630246899608704,0.43441621306211475\n0.13114855391946634,0.4427236744481853,0.5606021666053089,0.7627644959299551\n0.8700500002640936,0.5706395842390855,0.9232031600743613,0.2794767337335644\n0.27712500796399553,0.04846466893800638,0.9412177204427692,0.11394978880843554\n0.5332009396521258,0.8652999175074392,0.5106428971129151,0.5411000022783201\n0.5183886739158865,0.7023649944088071,0.9403192652213828,0.2834429874036677\n0.7261045198309333,0.9872392994743215,0.24536304179383883,0.6869065557339269\n0.8597218755515925,0.45703021240157327,0.3036807743618455,0.31583629206592123\n0.02742191775136149,0.30173067659903197,0.9377989651432783,0.6543761262235113\n0.3191270239234072,0.5104868444915347,0.28035474493445833,0.5140756526834358\n0.6154448707409372,0.7699831594843651,0.04228813094688899,0.149593335383863\n0.469904335662072,0.16903727361684773,0.9159894469924528,0.333841137792249\n0.8594995911193806,0.4545850836472418,0.8076229673103867,0.5154625310429215\n5.255014537155489E-4,0.005870097324926604,0.5681597903243889,0.2632802583144156\n0.06466065190824821,0.7113567523247859,0.6092453830639166,0.9112446064877753\n0.8250138569067005,0.07524200730776087,0.04809121436150132,0.6250147181564176\n0.8277516617194252,0.1053578602477323,0.05031225238916859,0.7242242759673607\n0.15902604405911092,0.7493760659842756,0.6789993587813488,0.047951351988418045\n0.24322630716108762,0.6755789601060194,0.37185415492720875,0.6486207390271725\n0.4314581425002686,0.7461291488370101,0.37362128682327644,0.6944996518991964\n0.20751021854116658,0.28270198528688795,0.5630689309496375,0.15830315808893225\n0.10981141948982298,0.20801519572210836,0.3081853145600211,0.5776284523864108\n0.2882567342772475,0.17091365838377826,0.39910150115400644,0.7585890221946454\n0.8801398235556164,0.6816276404458357,0.3102604138998919,0.46755605249926546\n0.49799362623824805,0.47801946995478417,0.9574046715670013,0.7632258556158023\n0.25830375083668144,0.8414308405375515,0.40904814038293913,0.4124896872161101\n0.25582882724712164,0.8142066810523936,0.27747634344580496,0.48593779624245426\n0.9563630729103849,0.5200833833482896,0.741841711044422,0.6742997286996304\n0.7210067981652415,0.931164361151712,0.5961249940200011,0.012789988661519258\n0.24289755400288726,0.6719626753658154,0.37188589131921135,0.7761958433337348\n0.39167901035802544,0.30855869527233537,0.24737566332989203,0.338678390064153\n0.39423522932974464,0.3366771039612466,0.1568498491104473,0.8935719266386644\n0.7035377249077683,0.7390045553195073,0.5669826591863303,0.637184328265936\n0.12913968984863544,0.4206261696690454,0.8406535748375534,0.771568639732739\n0.6269774476935552,0.8968415059631631,0.49556986269286485,0.5153663009544658\n0.8653461469288501,0.5188971975514072,0.39614849567563026,0.5238625346412014\n0.7079587543995345,0.7876358797289349,0.18869418124251136,0.8086595213948586\n0.6640842583523394,0.30501642320978917,0.3208113752890216,0.9496648461038593\n0.3552702366417364,0.908062184393156,0.0749041130461352,0.02372663487685278\n0.9887736096587716,0.8765992875805431,0.6493372804044375,0.8461319376402092\n0.6426817447200293,0.0695887732543774,0.5252051893633864,0.651254172402215\n0.765566087132207,0.4213165397883323,0.1385431644859918,0.33023501131334876\n0.6345715190057106,0.9803762903968725,0.26861073416791514,0.46534303589715376\n0.7842287756996527,0.6266061140302348,0.87731616643359,0.6173729717347884\n0.8927568356666384,0.8204147736670784,0.6976803293891627,0.27205044030102443\n0.02465209167191773,0.2712625897251506,0.8187055812657231,0.7550565899124908\n0.9839780683107122,0.82384833275189,0.06333001775516611,0.28573324569402225\n0.06242124160484508,0.6867232389873514,0.09014876198886612,0.36722316043501047\n0.5540452101949214,0.0945868934781906,0.5699974319290984,0.7801047583667566\n0.040545409594152204,0.4460890868697298,0.2153808853515924,0.1475591491062198\n0.9070695369010835,0.977854487245974,0.4893727928395908,0.3796454650071659\n0.7564889410397697,0.3214679327715224,0.09144827663447752,0.2342205525103469\n0.5362368418208021,0.8986948413628788,0.9253190058929943,0.5473875132478554\n0.8857328363257224,0.7431507809170022,0.5064223948880464,0.6788010341674118\n0.17474817142107923,0.9223194669659271,0.7654034898229385,0.5283983978963684\n0.1456037179592542,0.6017304788858517,0.4839878488044773,0.5519859795064226\n0.6191248490784247,0.8104629211967271,0.728532722370562,0.441451731744694\n0.9151817144980541,0.06708844081265042,0.7217372959496269,0.9862464158138322\n0.7380624302732102,0.11877631433936742,0.8564854856042534,0.4619838321703049\n0.30662903906709715,0.37300901107212425,0.7224004683411429,0.0657741536152181\n0.10318870312742234,0.13516531573570134,0.9871765561400734,0.5766768252205743\n0.4869080544267703,0.3560781800285291,0.7017185220099065,0.28496082699804104\n0.9169495616478756,0.08653475946068667,0.5943730008627737,0.6812493832546977\n0.951971935401609,0.4717808707517541,0.6207900776756352,0.2818847358073149\n0.1896791596033509,0.08656033697091559,0.3478617978307468,0.9502540586652823\n0.952253288014127,0.47487574948945266,0.2524952229626738,0.8375345852578928\n0.2237228257180348,0.4610406642324385,0.09658039615467495,0.6420830416824888\n0.07153688789087909,0.7869953481337255,0.8565013642326118,0.33878163534861616\n0.6570384108050362,0.227512100189454,0.3102530088494728,0.5218693724984886\n0.5027226834180496,0.5300390989326011,0.0037175986396043026,0.9466462363343751\n0.8305196695926682,0.13580594685340586,0.647180097671314,0.344236608497658\n0.49395499672152,0.43359454527077546,0.38686358750596006,0.7985484860978453\n0.7696295793125856,0.4660149537724969,0.3030567299130016,0.4414454518997766\n0.12625407283152157,0.3888843824807928,0.1384055298866893,0.8007476602182155\n0.2778177886227766,0.056085256184598364,0.34981368527216894,0.01632085881948586\n0.6170273993646376,0.7873909743450689,0.5470004050041157,0.44031707643191664\n0.6613902991298133,0.2753828717620017,0.5467715872358805,0.716072612165519\n0.02930117071607441,0.32240245921087407,0.11679943999616937,0.4776368873299408\n0.5465166326536703,0.011772540524429331,0.49102905918200324,0.6593297905803055\n0.1295875271027782,0.4255523794646159,0.38508040218110673,0.5844424421991494\n0.6811657554448303,0.4929128912271885,0.2783930107902286,0.18241772639199283\n0.4221313848331292,0.6435348144984765,0.7773002703870981,0.2377771897032277\n0.07897254081729699,0.8687875303243224,0.11219449959705075,0.9999396082233822\n0.5567524149016023,0.1243661452516811,0.7072327325223622,0.6478470262589608\n0.3681171791025477,0.04937855146208037,0.14248544679097885,0.6043882868946624\n0.5432536474169396,0.9758797029203912,0.504251366477249,0.0029286429996848717\n0.7347663134583584,0.08251902937599809,0.5171850792457588,0.45852590592648523\n0.9077989044700345,0.9858775305044354,0.34393616382457304,0.06975861067963529\n0.8447424168828448,0.2922561670453483,0.46309261249378797,0.1058803272922193\n0.21490741883288678,0.3640711884958101,0.6687905943651988,0.36046270728186647\n0.004872654787966724,0.05368878400168953,0.2871143161780114,0.5962360249953225\n0.5906662053526404,0.49741784021309954,0.710515241037097,0.297927745337097\n0.4716858236781505,0.1886336417937109,0.14959854362870728,0.03414210357559333\n0.0750596410648754,0.8257456330476849,0.7154067228568866,0.9198459243792767\n0.08329154485858936,0.9162965747785385,0.44665320715489853,0.27062472219692313\n0.07935190389797953,0.8729605242118303,0.4699237586489913,0.15497394971292655\n0.6026553476641894,0.6292984056401387,0.8722080492576294,0.9447403442885096\n0.9223720433755815,0.1461820584654525,0.0016143193840347791,0.03442130756462092\n0.6080922244540332,0.6891040503284209,0.0050365183178979755,0.3478204519934245\n0.5802341349466857,0.38266506574759873,0.5952758885208085,0.19335543425436708\n0.20940530455764161,0.3035479314681133,0.4210023851321334,0.932659694480046\n0.3391168274833021,0.7303746836503784,0.7886595447964619,0.7642333395541665\n0.03421110148821782,0.3764116977044516,0.8353972503537961,0.6934482635006427\n0.14061825608302314,0.5468903982473101,0.8936438046393895,0.30284149965897633\n0.01588396205446685,0.1748131639331909,0.7195999703828118,0.3934935742578558\n0.9230343845991555,0.15346781192476655,0.07387658194894198,0.18169977233532109\n0.6882355125064876,0.5706802189054194,0.09115738181630983,0.6242701876374119\n0.2775719892936692,0.053381463564416975,0.7926622012334261,0.2953730297930033\n0.5872856805426423,0.46023206730312083,0.7380023260309203,0.18746278920437498\n0.06264232166838468,0.6891551196862871,0.7061445175480605,0.8163619682003782\n0.5807958978832133,0.3888444580494017,0.743611900310434,0.5678020109963595\n0.27737861987747436,0.05125439998627357,0.7761594152412541,0.8855250851065288\n0.5638879811830648,0.20285737434776863,0.8717782768466391,0.5954759264994651\n0.23152069915951046,0.5468172720886706,0.5114683170459629,0.7567722609887875\n0.015079574309432076,0.1659648987378084,0.970937019091614,0.5832832425943275\n0.8257034674499479,0.08282772328348287,0.2727583416725514,0.6254687309063693\n0.9111945374523671,0.02322949331009383,0.2583279344043885,0.9046793486996649\n0.2556140077450877,0.8118436665300202,0.19187992490195382,0.013391071931380338\n0.9303699131642773,0.23415862614110594,0.8016451679971479,0.3950918786685411\n0.5758344688862209,0.33426873908248567,0.2953308168500759,0.8624734666050977\n0.6770457112413979,0.4475924049894324,0.46934927810909244,0.38008779877461274\n0.9236060362178122,0.15975597972999012,0.10045203482818987,0.5315950260885578\n0.7574053583639468,0.33154852333747087,0.4041784879130357,0.79494244924103\n0.6471233380462351,0.11844629984264188,0.7799747865985882,0.27765730000566435\n0.3029988796031162,0.333077256968334,0.7954050913672635,0.5575570141403179\n0.6639394079857297,0.3034230691770823,0.26875395378899025,0.26155230242317784\n0.3377433422819607,0.715266346435623,0.48791642572824934,0.25539165454096424\n0.868019392125909,0.548302894719054,0.6740320503221129,0.11479060019407172\n0.031421423243649826,0.34572523701420366,0.06891964478996115,0.6585875205275666\n0.8030671884902958,0.8338286547273093,0.4171993842318231,0.049428214340365706\n0.17220478333445755,0.8943421980130886,0.6269769330161377,0.9421736547515414\n0.8378537594780298,0.2164809355923829,0.3469493203360172,0.8951355580976865\n0.38137987285026753,0.19526818268699841,0.21918772624456628,0.36794580427988866\n0.14803959089103813,0.628525081135475,0.9721177070231293,0.8124005386078221\n0.9138654738242806,0.05260979340114247,0.5426673777276318,0.9872795877012459\n0.5787973087466227,0.36685997754690547,0.12757667377032833,0.09847926082781999\n0.03554933435001573,0.39113225918422856,0.7338141407730059,0.9124091787815707\n0.3025444323605697,0.32807833730032243,0.24116680131688173,0.48172820906132685\n0.6089512916376023,0.698553789347681,0.18338435958595456,0.8464051577554434\n0.6841812641585463,0.5260834870780648,0.1018446329954319,0.878990927237908\n0.7870079391927689,0.6571769124545135,0.3442521129294027,0.44458390809323145\n0.2290356183337039,0.5194813830047984,0.6215536863476405,0.5679648536828621\n0.714384794386838,0.8583223195892735,0.6389827114454099,0.036210627156501474\n0.4416350968160643,0.8580756463107626,0.5025157933816788,0.033751780737533155\n0.43892169075244425,0.8282281796109423,0.6167469652543334,0.6792777316536043\n0.11059955705442093,0.21668470893268577,0.9673626848703689,0.19371580750049588\n0.383621379593599,0.21992475686364443,0.7187663240607651,0.32554518257053644\n0.4192619068341443,0.6119705565096432,0.7740058200446422,0.5054213453672485\n0.7317657029401303,0.04951231367548914,0.2040213780953295,0.8178106575021569\n0.5447250317644361,0.9920649307428526,0.0024398729687724607,0.9529845718981962\n0.9128038195054344,0.04093159589383433,0.2734789362699164,0.49949886020412193\n0.45033713616623317,0.9537980791626204,0.4507337381709213,0.39251562257335504\n0.4918684521228798,0.4106425546857331,0.7800961310981598,0.961710232961952\n0.5171576828771194,0.6888240929823688,0.8140813009270926,0.3643392500174989\n0.5771546041401123,0.34879022687529115,0.8927452079511562,0.6292390072252891\n0.8367820769622583,0.2046924279188964,0.8393821684305942,0.4086917240312884\n0.2517062884419161,0.7688587541951328,0.19447664986496416,0.06874995923069482\n0.4575358774805167,0.032984233619739456,0.8066956751887637,0.4808588009749504\n0.3629161511511896,0.992167243997141,0.3666345888636746,0.9638436044127996\n0.9139292653026061,0.05331149966272264,0.47774396065134517,0.7738622113673372\n0.5865160776240046,0.4517664351981061,0.7203216830053543,0.9909591494084342\n0.9695203685132228,0.664813634979506,0.5343457380972603,0.6960286265596016\n0.31303956610862116,0.4435248085288883,0.17279659102484168,0.8798252620560685\n0.878862475151827,0.6675768080041529,0.835837473809347,0.855328261851285\n0.3434344693797371,0.7778687445111636,0.3394260753994296,0.2284346797199559\n0.5566457709568553,0.12319306185946388,0.6887207864216323,0.17546274453593114\n0.35521326178815826,0.9074354610037965,0.13067117514783977,0.22084974422650094\n0.9818796523758166,0.8007657574680387,0.22949996821276497,0.6653641528875862\n0.8085129134824811,0.8937316296413478,0.8401802473500481,0.236026813671792\n0.8311375073888811,0.14260216261174818,0.885660520146442,0.4346592554392812\n0.5687133700632856,0.2559366520301971,0.22313854883650142,0.9770970778168071\n0.8153927536662238,0.969409871662517,0.38514187126534605,0.20918591790723085\n0.6635981696217428,0.2996694471732262,0.818753200107559,0.3636449294199431\n0.29645350023954364,0.26107808396903565,0.5897916842722919,0.9209683556901125\n0.8719485049934477,0.5915231362619799,0.6663810784877833,0.1507144265732101\n0.5068440802158349,0.5753744637082399,0.46649016881365757,0.1483930315172879\n0.329208682124694,0.6213850847056896,0.8059488793903045,0.7285381184974369\n0.8353255130966417,0.18867022539711442,0.06012812769373488,0.5688086434361959\n0.0754620607023142,0.8301722490595118,0.43955944600714814,0.6174926738459683\n0.1319843209886855,0.4519171122095962,0.6817904747413404,0.5345596427833157\n0.9711778156396136,0.683045553369805,0.5803527584304284,0.2832809163830128\n0.5135906684019105,0.6495869337550708,0.39444948693141857,0.8370924221892997\n0.14554585263983455,0.6010939603722356,0.7176928855074058,0.878872816750794\n0.6121231454286473,0.7334441810491761,0.5501179526947151,0.2685822004570966\n0.06797557287499245,0.7478208829589725,0.03554231418747289,0.9331757852964198\n0.22611929388275342,0.48740181404434324,0.24192485120822615,0.1404327858276948\n0.3615095358218312,0.9766944753741988,0.4924418595662601,0.0726056453963082\n0.7437288104502429,0.18110649628672704,0.024551414946669903,0.9028559375481684\n0.992261040488053,0.9149610267026382,0.6437076327238813,0.5853984362339735\n0.06466087506307616,0.7113592070278933,0.3466262417606478,0.467715006191177\n0.8250408586408824,0.07553902638376186,0.05894856958509065,0.9558317621029708\n0.8310188715554361,0.14129716844385243,0.5506392337033552,0.531444760424914\n0.5543584342164323,0.09803235771481056,0.5904098259972725,0.626808569091958\n0.07844551619697171,0.8629902595007444,0.08777856112197191,0.6938496907047409\n0.49298243584224366,0.42289637559873583,0.9913041436467376,0.45411602220041036\n0.6519497129201497,0.1715364234557022,0.2307261160580767,0.3646519035290081\n0.8869902393467797,0.756982214148632,0.10554665636365645,0.7502284026377508\n0.32689393696900737,0.5959228879931366,0.913404756566889,0.9074930021957652\n0.5552413492585586,0.10774442317820032,0.8260363443007142,0.27412522844776266\n0.1852782362942591,0.03815018057090569,0.6887924265051908,0.5492521938085253\n0.41974156761401815,0.6172468250882552,0.953585261756599,0.2982160044502207\n0.7898046573048632,0.6879408116875503,0.2603849401600733,0.3114207452701241\n0.5674385098971086,0.24191319020225066,0.12578681844737472,0.691766179823383\n0.6611346735588128,0.27257099048099676,0.7240110736120928,0.11988988968453818\n0.9983704766250199,0.9821648242092742,0.663777221614801,0.809467090844274\n0.8039026476360718,0.8430187053308451,0.9882012035006429,0.15495243820052762\n0.27329533997335176,0.00633832104092491,0.4934345867228527,0.4011590662434912\n0.06981111278422958,0.7680118219605809,0.055352104292986315,0.6804448018878981\n0.4482196229004458,0.9305054332389595,0.7790999881500653,0.9039483389639029\n0.2356493469626102,0.5922323979227677,0.3609642873781369,0.10470883369513251\n0.5146459584845005,0.6611951246635606,0.7189925353321625,0.9778396716343838\n0.27323595263322176,0.005685060299494893,0.1601330792827853,0.35280067914123014\n0.06262524462849939,0.6889672722475488,0.9258876835129053,0.7941519141877535\n0.5787295760570927,0.36611491796207574,0.5895624939020851,0.6656100091985695\n0.02735367891688867,0.3009800494198309,0.9976534069051766,0.456789769646168\n0.3108701249521957,0.41966095580820806,0.7328652076633497,0.16048179758740222\n0.6163600952243442,0.7800506288018418,0.911413059570316,0.4269661567349088\n0.5806464981543158,0.3872010610315293,0.6443972500298392,0.446028544067409\n0.2593012526808778,0.8524033608237112,0.7173736371907313,0.7739660864980822\n0.37652655039487826,0.1418816356777164,0.5505794718825594,0.4809224831738199\n0.5607875737889358,0.16875289301234986,0.7842384392857433,0.30314953758980234\n0.856371404469904,0.42017503050299965,0.18472239563851,0.37775847508230975\n0.6220149168670517,0.8422536668716241,0.34646366893793457,0.9306335867916831\n0.26487991692192026,0.9137686674751784,0.24943027548055818,0.045925867284936306\n0.0515449235610177,0.5670837405052502,0.2194671983025276,0.2011451930996413\n0.23801072689180813,0.618207577143945,0.18926901943110952,0.8016995620861858\n0.8003729299174509,0.8041918104260155,0.34280145357988956,0.19566465847637393\n0.8461994960202261,0.3082840375565432,0.9541847274370729,0.1699799320964459\n0.3912139944560309,0.30344352035039535,0.1722090696050571,0.21381437258855773\n0.33796830518840437,0.7177409384065037,0.22247087411817756,0.5852879559414512\n0.8952399038055958,0.8477285231956095,0.8457093071362554,0.5153609844846359\n0.3251033364857605,0.5762262826774212,0.07541204559916914,0.07698152432294214\n0.33857869078568825,0.7244551799766263,0.7205977771618173,0.3217490265867906\n0.9690965610769453,0.6601517531804539,0.09980586175720108,0.7118875487374561\n0.2617588663190489,0.8794371108435932,0.4129580039604255,0.020270415077912274\n0.673897800613581,0.41296538808344607,0.8971659007270769,0.5290279348711127\n0.5427088502519624,0.9698869341056415,0.007371735132554624,0.28240270557376035\n0.6688458564961124,0.35739400279129185,0.6046835567731954,0.2772739896069789\n0.931423612038266,0.2457493137549811,0.5133600918711339,0.48778641897151\n0.7033320326388477,0.7367419403613802,0.6850838777360599,0.6727567563238257\n0.10425092530923763,0.1468497597356695,0.1272389482831766,0.276324777903004\n0.61543693842642,0.7698959040246756,0.7146783137340298,0.5560071349754785\n0.4689445256054867,0.15847936299440946,0.16528885795511217,0.11944709034654077\n0.7433625742725596,0.177077898332211,0.5983709151626193,0.8578081190217133\n0.9479464629883765,0.42750067420619686,0.7027011857386931,0.497328099244007\n0.702596997602221,0.7286565549584871,0.4706542685181534,0.14177711708331509\n0.01531168587741405,0.1685181259856101,0.16897687361792157,0.876456200908631\n0.8537889671757668,0.39176822026749036,0.5890576838074413,0.39135885762506284\n0.30954000427644957,0.4050296283750008,0.46150754564670615,0.8589611654136726\n0.4554154934590642,0.009660009383761547,0.008314168724026239,0.8587127354898678\n0.10634968455543259,0.16993611144381404,0.8011974907802208,0.8030753879581121\n0.86938680721601,0.5633444607101659,0.6940609567327862,0.5274601716009975\n0.19687864914588005,0.16575472193873608,0.7326425264008565,0.4838797766663765\n0.8233915226601525,0.05739633059573279,0.6517366909487103,0.7163580071217082\n0.6314492178871163,0.9460309780923346,0.6993663569189581,0.9998579066079931\n0.40643034034973624,0.4708233251811542,0.739989188356148,0.29252224621421585\n0.17914615832675196,0.9706973229283271,0.25244932422295996,0.24450211167221414\n0.6777601335456538,0.4554510503362472,0.28540687521310026,0.8521326984277013\n0.010051135032774994,0.1106520666945805,0.4838411783482679,0.28126910115846226\n0.21726231497444104,0.389975046052907,0.2579637827502297,0.5821436770635859\n0.2898150879160326,0.18805554841041427,0.7625723741947328,0.02622591640243499\n0.06870061384861259,0.7557963336687941,0.1155381428098663,0.20412526645803264\n0.31384925169079025,0.45243134993274836,0.5296175365231077,0.9774522009882793\n0.9768344305942875,0.7452683178712185,0.9614293648314263,0.6103032403698749\n0.19804107791745906,0.17854143842610526,0.411560258360254,0.23657413712655728\n0.9640454040212134,0.6045890255674031,0.3457523202718804,0.12759915117265508\n0.65056886257549,0.15634706966444512,0.5163073312777371,0.39995427100084346\n0.7199073476429518,0.9190704054065257,0.4665834537381186,0.24890194592459514\n0.10986404080583867,0.20859403019828093,0.5915657053049683,0.3403985251433821\n0.29462391351514583,0.2409526300006597,0.7529044032869268,0.8630993170884373\n0.6505685113413122,0.15634320608848995,0.46880831280715474,0.7138520954736858\n0.719864848307445,0.9186029127159507,0.33289674462164,0.13001850503326984\n0.10472162120951367,0.15202741463870595,0.8537295008899428,0.37020831328073767\n0.672391142359821,0.3963921472920866,0.7714730608780247,0.5491847377306853\n0.3604032015470082,0.964524798351146,0.7969277180219705,0.029453746918137735\n0.6098623631966618,0.7085755764973349,0.02238984224828444,0.3285905666649118\n0.7944209228047399,0.738719732186194,0.8722283641544235,0.4960249652390616\n0.1260066353821898,0.3861625705381435,0.9839977871018863,0.2694383110151728\n0.2478778572536342,0.7267460111240318,0.2945531136831081,0.06999224840710272\n0.9942957036984055,0.9373423220165158,0.028510402633904697,0.48745550445507324\n0.3108551235157293,0.4194959400070779,0.9151906411514703,0.6821644088057999\n0.6145449214119125,0.7600837168650934,0.8485881616341961,0.984931350876191\n0.3610104668500824,0.9712047166849622,0.2978866998713108,0.7717084647348458\n0.68334146486864,0.5168456948890956,0.37760009664387173,0.5420733242266536\n0.6853922251141071,0.539404057589234,0.6050552859157763,0.7657938734043734\n0.93353421481563,0.26896594430598597,0.7766133064637728,0.7938312075929119\n0.9587149686999012,0.5459542370329693,0.25802543184333593,0.8508720413044106\n0.0055861886967178975,0.06153765699795244,0.8795818572088807,0.962301250373701\n0.6770038083115324,0.4471314727609119,0.15112359444407542,0.11303997441800795\n0.9185357817040867,0.10398318007900897,0.3114145750367836,0.9136578462759504\n0.14390456220315428,0.5830397655687527,0.8215747188848981,0.9819769937675107\n0.41352700259033526,0.5488866098277434,0.995133420359259,0.06635659195124055\n0.03784228943923296,0.4163547651656181,0.7545886152351899,0.5961713488712357\n0.5799919981558546,0.3800015610484557,0.31297807056038573,0.8765865252081031\n0.18010675286706856,0.9812638628718098,0.8765443430562676,0.531767445486816\n0.7939920729239631,0.7340023834976499,0.057470055024236855,0.735477762258568\n0.07411579980820449,0.8153633792243049,0.9250685138867476,0.9671101289991253\n0.9690867528014095,0.6600438621495606,0.9426188200503312,0.7922943380779164\n0.2605720649792218,0.8663822961054954,0.23530031886854097,0.3438107896767846\n0.5302948384945054,0.8333328047736153,0.37577840160933573,0.5455120623390644\n0.1667504338438235,0.8343443536161139,0.0021426650448077567,0.6826175140690354\n0.1778774711113087,0.9567417635584512,0.22897712505909773,0.49383791641187136\n0.5242489804770187,0.7668283665812616,0.890378689747793,0.6493564270792669\n0.43520161372793353,0.7873073323413244,0.892239548248277,0.2842401198910427\n0.6604702370886244,0.265262189308924,0.5150099934444656,0.023797129750224633\n0.9179736637322193,0.09779988238846826,0.8512330693375674,0.6992017778189412\n0.07588828760720645,0.8348607450133265,0.8572711898624494,0.8699366188239468\n0.1835577764806473,0.019225122621175927,0.18593706145877653,0.015908161690310285\n0.21156593016699077,0.327314813170954,0.7501422280048584,0.22098908984643395\n0.6005525262145497,0.6061673696941021,0.32779221918855606,0.7103160696702842\n0.6679306479691789,0.3473267089950234,0.5048614571274341,0.20764852700048708\n0.8206833802793128,0.0276067644064959,0.8961981406866892,0.1167159739241952\n0.30376398980551045,0.3414934691946705,0.35647885997545026,0.07759789273302031\n0.756517742475431,0.3217847485637968,0.7298009597399897,0.8833570254632257\n0.5397218155358203,0.9370295522280792,0.15598315280562636,0.11232365183057458\n0.30741465584292627,0.3816507956062445,0.09289034946924857,0.6022897095796298\n0.19824833300274491,0.18082124436424962,0.7237196735906706,0.588808353677446\n0.9891232693408014,0.8804455440828711,0.5374611698982747,0.9653783362109811\n0.6849905662456379,0.5349858100360727,0.517497517451067,0.06312020161189236\n0.8849334917308553,0.7343579903734643,0.7692623260632374,0.9253184812791391\n0.0780274754421626,0.8583918111978441,0.6412389680997066,0.257755346522051\n0.44239950451034105,0.8664841309478071,0.06898503202777961,0.2213927177324284\n0.5314150217599334,0.8456548206933228,0.4631596392367163,0.32145240230124683\n0.30229260896060595,0.325308279900721,0.4682010536721859,0.9850796758994136\n0.5784806602419863,0.36337684399590486,0.3273249736802317,0.08071578757493136\n0.9972348652890091,0.9696730995131553,0.4677870817875247,0.09864744764876354\n0.6664936759787636,0.33152001710045553,0.9964185480299566,0.7051153163210373\n0.6468097694390664,0.11499704516378628,0.5070739448516435,0.9294033753726327\n0.26505707813570467,0.915717440826807,0.33853189243332316,0.764602386345314\n0.07298143042893201,0.8028853160523077,0.5098308146936776,0.35295182469169184\n0.8318280579094406,0.15019821833790203,0.014249817596298842,0.27127405718073794\n0.6522699830509779,0.17505939489481293,0.37979911757334195,0.38676422526384346\n0.9257429251769977,0.18326175828103075,0.8240440322777689,0.10140207606843843\n0.015968922425393828,0.17574772801338767,0.7352501710218693,0.48511171892019056\n0.93331458948132,0.2665500656285751,0.6083100485898763,0.6686408156336945\n0.9321403032483815,0.2536329170662519,0.08064098676602138,0.39784416626269925\n0.7900516690628265,0.6906579410251474,0.6455950960705161,0.9708638881345195\n0.5973269326106774,0.5706858400515067,0.2692520680211177,0.5518801523009664\n0.27763382190062913,0.05406162224097599,0.24496527971950344,0.23084566407241947\n0.5947674259847915,0.5425312671667619,0.5615577929565159,0.8094531169425212\n0.9679335201684367,0.6473583031868593,0.9506136385496295,0.2924259233977109\n0.12103091638950758,0.33142966161863896,0.4181278104520352,0.46875622601295897\n0.6458158591390841,0.10406403186398094,0.6651090247882441,0.6691240396521805\n0.14479393183784595,0.592822831550361,0.5579983447002941,0.8788958308954788\n0.5211407283880263,0.7326375936023446,0.8726007267320242,0.18999366810756024\n0.059103110959846106,0.6502238018923627,0.06479167397971763,0.4057096464628531\n0.1525514021500456,0.678155004984557,0.1182235346550018,0.8739151922402029\n0.45979463616418315,0.05783057914007017,0.04494661719837101,0.6148097234496388\n0.6362259518748274,0.9985750519571575,0.9771357066799826,0.18550088053620883\n0.9844151528627876,0.8286562628247189,0.9189463659784947,0.655487277985165\n0.11530847240596387,0.2684827777996581,0.8117036802643294,0.12658360308435412\n0.9534001371302949,0.4874910897672997,0.7644326755855819,0.1972779478118316\n0.3624915687743524,0.987496837851932,0.3407015459860008,0.8499080980497686\n0.8625547977053074,0.48819235609243705,0.9885685221323017,0.5903047003146156\n0.37020549835086314,0.07235006319355008,0.37094580575169167,0.6048709436278104\n0.7959402764631065,0.7554326224282271,0.9513159252391068,0.7304871339219603\n0.30984842804455326,0.4084222898241414,0.09607088269973274,0.20684926602526277\n0.49273476939961114,0.4201720447297781,0.6189012192846035,0.14512423091905613\n0.6219820733616146,0.8418923883118161,0.722987898607937,0.8830084761235777\n0.2609058527640329,0.8700539617384173,0.16941131591653003,0.03714870237805501\n0.570683160456646,0.2776043463571618,0.1837642778216011,0.39247313463918077\n0.05373739126283539,0.5912008852252448,0.11513174518056868,0.6705821507466627\n0.5032993188117487,0.5363820882632915,0.27599069750333394,0.6102829638242802\n0.9002925522302618,0.9033076558669357,0.37068326497406345,0.4889315879950944\n0.9364737958703486,0.30130133590789043,0.7244782418707243,0.46632665532586026\n0.31440427632085033,0.4585366208634092,0.7829527919031098,0.853640675430049\n0.04399241083155658,0.484006100481178,0.4555975923429363,0.3131735965760345\n0.32415668662701336,0.5658131342312025,0.9692093809549847,0.04988179155007333\n0.22403405787728303,0.4644642179841689,0.48651882673018654,0.16250215749691765\n0.10919597915991375,0.2012453520931068,0.810435891729621,0.5068553834938685\n0.21378845435823024,0.3517625792745882,0.41905783420291276,0.41127324714845837\n0.8694779533545258,0.5643470682338396,0.983969004353197,0.15890754609545588\n0.2079073319062914,0.287070232303261,0.21229360566269118,0.1787110361671862\n0.15786213666992666,0.7365730847032488,0.5875702055760124,0.5784571059383483\n0.10239351306979216,0.12641822510176937,0.27945549617175525,0.8310676258425684\n0.3906900574535186,0.29768021332276007,0.9760329345989303,0.9863527660841607\n0.2745719278844163,0.02038078806263499,0.2049799675542625,0.6869786427253262\n0.22427825002304047,0.46715033158750074,0.13094507793077592,0.09792336180739025\n0.13874322879656376,0.5262650980962569,0.8904381708650184,0.26952443979392027\n0.7890056603928812,0.679151845655749,0.08762773443584826,0.18452786286054845\n0.47075988354729503,0.17844830035430093,0.581173409701897,0.0628801457567223\n0.9630208852313658,0.5933193188790788,0.978048473003458,0.5457902081922532\n0.5266020890039229,0.7927125603772076,0.08167083700785782,0.9517987375979287\n0.7199277454833393,0.9192947816507875,0.5128094727751307,0.16178577453250131\n0.1123321794927179,0.23574355575395245,0.38354184492205,0.10971504885341887\n0.5932686946275325,0.5260452222369132,0.8232943541258668,0.22902613936116967\n0.7865870259401007,0.6525468666751628,0.5368408781711196,0.6893853067149351\n0.17810511476084656,0.9592458437033677,0.8781953436980274,0.7025586820513672\n0.5517938620711007,0.06982206411616332,0.7551272457635774,0.7078104145557342\n0.7681322866118521,0.4495447340644283,0.7435339286042704,0.6891526608605814\n0.9450816560427668,0.3959877978044908,0.9032471094825285,0.13384729622583924\n0.35595535718345417,0.9155985103520514,0.9529126043089395,0.014956021003151632\n0.07167319520662119,0.7884947286068886,0.030745047512824142,0.8843172184592687\n0.6735315960098305,0.40893713744219085,0.11029477518810293,0.6676452250275862\n0.49839809319815487,0.4824686065137591,0.3785816507037312,0.9806072415275793\n0.3072442529854058,0.37977636417351945,0.6935339533801193,0.4983463588227077\n0.17762958724276956,0.9540150410045207,0.05887298841038646,0.15762086914543905\n0.49425503238378354,0.43689493755567455,0.16071466705184667,0.8561926664648154\n0.8059338944464756,0.8653624202452868,0.5401105092638174,0.8977276937328038\n0.5190762040322099,0.7099278256883643,0.6688040379369231,0.895932750118241\n0.8092956639060631,0.9023418843007498,0.5448302695970832,0.8121641565486639\n0.9258503086423033,0.18444297639939222,0.31588952204868725,0.6734220610357295\n0.02896232172737001,0.3186751203351257,0.036964981980611045,0.4255070259498852\n0.5055159050204381,0.5607645365588745,0.6778759440587001,0.26568305374760603\n0.16849948348167487,0.8535838996324792,0.8349264853788709,0.8125915251598237\n0.3895124772913263,0.2847268315386451,0.4355159123990586,0.8565076677081584\n0.13208472825915152,0.45302159218472227,0.18954757467276306,0.7133985327257091\n0.9833270953660005,0.816687630360061,0.317380446615078,0.20559090132574198\n0.9836535152947263,0.8202782495760452,0.8410427337872595,0.18211702660370688\n0.023150326670553056,0.2547431747101392,0.4539655937603677,0.32374839923177356\n0.8022645031455866,0.8249991159355083,0.10019403653149483,0.8820485756682246\n0.07507985662464733,0.8259680042051762,0.26741564892555814,0.6188197441845398\n0.08573762759099424,0.9432034848349922,0.8617464260458951,0.23641064465954909\n0.3753279145189694,0.12869664104271905,0.33034765930264864,0.9203297170371545\n0.4157526328039651,0.573368542177672,0.08598782658883741,0.41410936153680455\n0.30714354528844723,0.3786685795069751,0.3596076688736103,0.10513071096350801\n0.16544395591078143,0.8199730963526513,0.10836619452311735,0.9344276316918603\n0.01979364121321936,0.21781963467946852,0.3538981233584959,0.7334849932342442\n0.3961055628082093,0.35725077222435786,0.8707374664312895,0.5292210624798099\n0.929848075801992,0.22841841515596784,0.4796781949894391,0.21510454046195804\n0.5126921480497018,0.6397032098807749,0.37978269022634814,0.05963770388517764\n0.03682489002257938,0.40516337158242877,0.3758855260573608,0.047477702070460204\n0.456886668740772,0.025842937482547512,0.6078353827791272,0.8032165399475164\n0.2843618936420782,0.12807041139691577,0.8957005034281336,0.6050832537208684\n0.40886410670012907,0.49759475503547534,0.6549503016486138,0.7308814192021507\n0.47363188672428436,0.2100403353011835,0.32415639180463995,0.317450211692776\n0.31053326964707395,0.415955547451869,0.642392281821774,0.2642147847833747\n0.5756006033046148,0.3316962176848186,0.4990344244544376,0.5319907249945002\n0.6487479758670602,0.13631731587171814,0.3991151325741402,0.06676778656695714\n0.49958005592295507,0.4954701964865613,0.6399499768681487,0.1597823730523913\n0.4502617426862301,0.9529687508825866,0.4256575773911597,0.11565424730480167\n0.48274584104250806,0.31029383280164424,0.9344610346452362,0.2317588577374181\n0.41332174215214224,0.5466287450076202,0.6870460513276127,0.6224850648404066\n0.013005776417877257,0.1431531219307054,0.9171304436573056,0.7152353266860472\n0.5747739225718149,0.3226027296240197,0.2290058074703729,0.8631665961278989\n0.5487196071982723,0.03600526051505071,0.9874410837316698,0.5165967855602149\n","format":{"type":"csv"}}}],"height":300,"data":{"url":"index_files\/2.csv","format":{"type":"csv"}}});</script></div>
<p>We can see that the mersenne-twister PRNG has no discernible pattern.;;</p>
</section>
<section id="law-of-large-numbers" class="level2">
<h2 class="anchored" data-anchor-id="law-of-large-numbers">Law of Large Numbers</h2>
<p>Now we have our <code>make-fair-coin-box</code> which returns reproducible results, we’re going to estimate the probability of head given n trials.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb56"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> flip-a-coin-box </span>(make-fair-coin-box <span class="dv">1337</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb57"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> estimate-head-optimized</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"return probability for :head from n trials of experiment modeled by flip-a-coin-box."</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  [flip-a-coin-box n]</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> [head-count (<span class="kw">loop</span> [i <span class="dv">0</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>                          <span class="kw">count</span> <span class="dv">0</span>]</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>                     (<span class="kw">if</span> (<span class="kw">&lt;</span> i n)</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>                       (<span class="kw">recur</span> (<span class="kw">inc</span> i)</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>                              (<span class="kw">if</span> (<span class="kw">=</span> (flip-a-coin-box) <span class="at">:head</span>)</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>                                (<span class="kw">inc</span> <span class="kw">count</span>)</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>                                <span class="kw">count</span>))</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>                       <span class="kw">count</span>))]</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">double</span> (<span class="kw">/</span> head-count n))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb58"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [<span class="kw">ns</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">10</span> <span class="dv">25</span> <span class="dv">50</span> <span class="dv">75</span> <span class="dv">100</span> <span class="dv">500</span> <span class="dv">1000</span> <span class="dv">5000</span> <span class="dv">10000</span> <span class="dv">100000</span>]</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>      ps (<span class="kw">mapv</span> (<span class="kw">partial</span> estimate-head-optimized flip-a-coin-box) <span class="kw">ns</span>)]</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  (tc/dataset {<span class="at">:n</span> <span class="kw">ns</span> <span class="at">:p</span> ps} {<span class="at">:dataset-name</span> <span class="st">"Estimated head probability p from n experiments"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>Estimated head probability p from n experiments [15 2]:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: right;">:n</th>
<th style="text-align: right;">:p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.00000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.00000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1.00000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.25000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.40000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">0.50000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">25</td>
<td style="text-align: right;">0.52000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">50</td>
<td style="text-align: right;">0.38000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75</td>
<td style="text-align: right;">0.54666667</td>
</tr>
<tr class="even">
<td style="text-align: right;">100</td>
<td style="text-align: right;">0.54000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">500</td>
<td style="text-align: right;">0.54400000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1000</td>
<td style="text-align: right;">0.49300000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5000</td>
<td style="text-align: right;">0.48840000</td>
</tr>
<tr class="even">
<td style="text-align: right;">10000</td>
<td style="text-align: right;">0.50000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">0.50088000</td>
</tr>
</tbody>
</table>
</div>
<p>As we can see, the more we repeat the experiments, the closer we are to the true value of 50%. How many experiments do we need so that we can be confident of our estimation?</p>
<p>We’ll visualize this with a plot. We’re going to run 1 to 10000 trials and store the result in a dataset.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb59"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> dataset </span>(tc/dataset {<span class="at">:n</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10001</span>) <span class="at">:p</span> (<span class="kw">into</span> [] (<span class="kw">pmap</span> (<span class="kw">partial</span> estimate-head-optimized flip-a-coin-box) (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10001</span>)))}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb60"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> dataset</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/line-chart</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>              {:=x <span class="at">:n</span> :=y <span class="at">:p</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"n","type":"quantitative"},"y":{"field":"p","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"line","tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"index_files\/3.csv","format":{"type":"csv"}}});</script></div>
<p>The plot shows that the larger the number of experiments, the closer our estimation to 50%. We can see it with more clarity if we use logarithmic scale for the x axis.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb61"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> dataset</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/line-chart</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>              {:=x <span class="at">:n</span> :=y <span class="at">:p</span>})</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:encoding</span> <span class="at">:x</span> <span class="at">:scale</span>] {<span class="at">:type</span> <span class="at">:log</span>})</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">update-in</span> [<span class="at">:encoding</span> <span class="at">:x</span>] <span class="kw">dissoc</span> <span class="at">:type</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"n","scale":{"type":"log"}},"y":{"field":"p","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"line","tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"index_files\/3.csv","format":{"type":"csv"}}});</script></div>
<p>We’ve observed that as we increase the number of coin flips, our estimated probability for getting heads converges towards 0.5 (or 50%). This phenomenon is a practical demonstration of the Law of Large Numbers (LLN), one of the fundamental principles in probability theory and statistics.</p>
<p><em>The Law of Large Numbers states that as we increase the number of trials of an independent experiment, the average of the results tends to converge to true value</em>.</p>
<p>So, in our coin-flipping experiment:</p>
<ol type="1">
<li>Each flip is an independent trial</li>
<li>The result of each trial is either head or tail</li>
<li>We are interested in a trial whose result is head</li>
<li>In a number of trials, the average result is the count of the occurrence of head divided by the number of trials. In our case, the average result is the estimated probability of heads.</li>
<li>As we increase the number of flips, the estimated probability of heads gets closer to 0.5</li>
</ol>
<p>We also can use Law of Large Numbers to estimate the probability of head from a mystery box where we don’t know th proportion of heads and tails in the tickets. Here this box creation function accepts additional parameters tickets.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb62"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> make-mysterious-fair-coin-box</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  [seed tickets]</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> [m (Math/pow <span class="dv">2</span> <span class="dv">48</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>         lcg (make-lcg {<span class="at">:X0</span> seed <span class="at">:c</span> <span class="dv">25214903917</span> <span class="at">:a</span> <span class="dv">11</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">:m</span> m})]</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">fn</span> []</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">nth</span> tickets</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>            (<span class="kw">long</span> (<span class="kw">*</span> (lcg-rand lcg m) (<span class="kw">count</span> tickets)))))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’re going to create the tickets parameter using our lcg. The total number of tickets are 10, at least there’s one head or tail ticket.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb63"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> lcg-m </span>(make-lcg {<span class="at">:X0</span> <span class="dv">1990</span> <span class="at">:c</span> <span class="dv">25214903917</span> <span class="at">:a</span> <span class="dv">11</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:m</span> (Math/pow <span class="dv">2</span> <span class="dv">48</span>)}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb64"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> unknown-tickets</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> [n-head (<span class="kw">some</span> #(<span class="kw">when</span> (<span class="kw">&lt;</span> <span class="dv">0</span> <span class="va">%</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                        <span class="va">%</span>) (<span class="kw">repeatedly</span> #(<span class="kw">long</span> (<span class="kw">*</span> <span class="dv">10</span> (lcg-rand lcg-m (Math/pow <span class="dv">2</span> <span class="dv">48</span>))))) )</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>        n-tail (<span class="kw">-</span> <span class="dv">10</span> n-head)]</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">-&gt;&gt;</span> []</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>         (<span class="kw">into</span> (<span class="kw">repeat</span> n-head <span class="at">:head</span>))</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>         (<span class="kw">into</span> (<span class="kw">repeat</span> n-tail <span class="at">:tail</span>)))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb65"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> mystery-box </span>(make-mysterious-fair-coin-box <span class="dv">1337</span> unknown-tickets))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb66"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> dataset </span>(tc/dataset {<span class="at">:n</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10001</span>) <span class="at">:p</span> (<span class="kw">into</span> [] (<span class="kw">pmap</span> (<span class="kw">partial</span> estimate-head-optimized mystery-box) (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">10001</span>)))}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We plot the estimation using logarithmic scale</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb67"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> dataset</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/line-chart</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>                 {:=x <span class="at">:n</span> :=y <span class="at">:p</span>})</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:encoding</span> <span class="at">:x</span> <span class="at">:scale</span>] {<span class="at">:type</span> <span class="at">:log</span>})</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">update-in</span> [<span class="at">:encoding</span> <span class="at">:x</span>] <span class="kw">dissoc</span> <span class="at">:type</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"x":{"field":"n","scale":{"type":"log"}},"y":{"field":"p","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"line","tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"index_files\/4.csv","format":{"type":"csv"}}});</script></div>
<p>Let’s see the proportion of the head tickets</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb68"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">/</span> (<span class="kw">double</span> (<span class="kw">count</span> (<span class="kw">filter</span> #(<span class="kw">=</span> <span class="va">%</span> <span class="at">:head</span>) unknown-tickets))) <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb69"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our estimation with large amount of trials resulting in a value which is close enough to the proportion of the unknown-tickets.</p>
</section>
<section id="central-limit-theorem" class="level2">
<h2 class="anchored" data-anchor-id="central-limit-theorem">Central Limit Theorem</h2>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: src/index.clj</small></small></pre></div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>